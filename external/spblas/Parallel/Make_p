ARCH=pgilinux
#ARCH=pclinux
#ARCH=ultra
#ARCH=alpha
#ARCH=irix64
include base.make
PLFLAGS = -Mconcur=cncall -Mneginfo=concur


SRC_C    = tvbrmm.c cblas_duscr_vbr.c cblas_dusmm_ref.c \
	      cblas_dusmm_p.c cblas_dusmm1_ref.c ranf_local.c
SRC_F    = d27ptgen.f

LDFLAGS = -O $(LIB) $(SYSLIBS)

OBJS   = $(SRC_C:.c=.o) $(SRC_F:.f=.o) $(TIMER_OBJ)

#####################################
# Define implicit compilation rules #
#####################################

TARGET=tvbrmm
all: $(TARGET)

%.o:%.f
	$(FC) $(FFLAGS) -c $<
%.o:%.c
	$(CC) $(CFLAGS) -c $<

cblas_dusmm_p.o: cblas_dusmm_p.c
	$(CC) $(PLFLAGS) $(CFLAGS) -c  cblas_dusmm_p.c

# executable

$(TARGET): $(OBJS)
		$(LOADER) $(OBJS) $(PLFLAGS) $(LDFLAGS) -o $(TARGET) 

clean:
	@echo "cleaning ..."
	/bin/rm -f $(OBJS) $(TARGET) *~

From: Johnson, Donna [donjohn@sandia.gov]
Sent: Monday, August 20, 2001 2:19 PM
To: Heroux, Michael A
Subject: FW: FW: Link problem: missing cvt_*

Hi, Mike,
Here is some more information from Sue:

-----Original Message-----
From: Sue P. Goudy [mailto:spgoudy@valinor.sandia.gov]
Sent: Monday, August 20, 2001 12:32 PM
To: donjohn@sandia.gov
Cc: eaengqu@sandia.gov
Subject: Re: FW: Link problem: missing cvt_*



Donna,  The answer to Mike's fist question is this:

The optimized BLAS & LINPACK libraries for Compaq system are the correct
ones to use for cplant compute nodes.  This is because the compile scripts
in juneau:/usr/local/cplant/alaska/current/bin produce Tru64 style
executables.
In turn, this is okay because the loader for the compute nodes understands
Tru64 binary object format and can load such executables into memory on
compute nodes.

The answer to his second question is:

When using the c++ compiling script, which calls the Compaq cxx compiling
system, and when linking with the cxml math library, it is necessary to tell
the compiling system about the location & names of the Fortran libraries.
The routines from libcxml.a call routines from the Fortran utility
libraries.
The picture is compilcated though, because some of the Fortran routines need
to be satisfied first from cplant libraries.  It may be necessary to specify
more than one set of Fortran libraries in order to get everything.  So I'd
try
first to set some variables in the Makefile, for example, like this

CPLANT_FOR="-L/usr/local/cplant/alaska/current/lib -lUfor -lfor -lFutil -lm
-lgrp_io"
COMPAQ_FOR="-L/usr/lib -lUfor -lfor -lFutil"
FORTLIBS = $(CPLANT_FOR) $(COMPAQ_FOR)

Then use in the link line like this

usr/local/cplant/alaska/current/bin/c++ \
cc_main.o ExecuteTestProblems.o BuildTestProblems.o \  
/home/maherou/Trilinos/lib/CPLANT.SERIAL/libpetra.a \
-L/usr/lib -lcxml -lots ${FORTLIBS} \
-o cc_petra_multivector_serial

This may need some more tweaking.  The missing cvt_* routines seem to
located
in a couple of the Fortran libraries, but once they are found there may be
other Fortran routines we have to find for c++.

--Sue



> From donjohn@sandia.gov Mon Aug 20 09:57 MDT 2001
> From: "Johnson, Donna" <donjohn@sandia.gov>
> To: "Goudy, Sue P" <spgoudy@mailgate.sandia.gov>
> Cc: "Engquist, Eric" <eaengqu@sandia.gov>
> Subject: FW: Link problem: missing cvt_*
> Date: Mon, 20 Aug 2001 09:57:16 -0600
> MIME-Version: 1.0
> X-Filter-Version: 1.3 (sass165)
> 
> Hi, Sue and Eric,
> Can you give me a hint on this one?
> Donna
> 
> 
> -----Original Message-----
> From: Mike Heroux [mailto:mheroux@cs.sandia.gov]
> Sent: Friday, August 17, 2001 5:10 PM
> To: alaska-help@sandia.gov
> Subject: Link problem: missing cvt_*
> 
> 
> I am trying to link a program on juneau to run on alaska.  I have been
able
> to successfully link and run a simple program, but am now trying to
include
> links to the BLAS library (which I believe is part of /usr/lib/libdxml.a).
> Unfortunately, I get the following unsatisfied externals and cannot find
> which library would satisfy them.  The output is below.
> 
> My first question is:  Where are the BLAS and LAPACK math libraries for
> CPLANT?  Or first, are there optimized BLAS and LAPACK libraries for
CPLANT?
> I know that /usr/lib/libcxml.a contains optimized BLAS and LAPACK for
Compaq
> Unix systems.
> 
> My second question is:  Assuming I am linking to the proper library for
BLAS
> and LAPACK, namely /usr/lib/libcxml.a, how can I resolve the cvt_* links?
> 
> Any help would be appreciated.
> 
> Sincerely,
> 
> Mike
> 
> Michael A. Heroux, Ph.D.
> Massively Parallel Computing Research Lab
> Sandia National Labs
> (320) 845-7695 (phone)
> (320) 845-7846 (fax)
> mheroux@cs.sandia.gov
> http://www.cs.sandia.gov/~mheroux
> 
> 
> usr/local/cplant/alaska/current/bin/c++  cc_main.o ExecuteTestProblems.o
> BuildTestProblems.o  /home/maherou/Trilinos/lib
> /CPLANT.SERIAL/libpetra.a /usr/lib/libcxml.a -lots -lfor -lm  \
>   -o cc_petra_multivector_serial
> ld:
> Error: Undefined:
> cvt_boolean_to_text_ex
> cvt_text_to_boolean
> cvt_text_to_boolean64
> cvt_boolean64_to_text
> cvt_text_to_integer
> cvt_text_to_unsigned
> cvt_integer_to_text
> cvt_unsigned_to_text
> cvt_text_to_integer64
> cvt_text_to_unsigned64
> cvt_integer64_to_text
> cvt_unsigned64_to_text
> cvt_text_to_data
> cvt_data_to_text
> cvt_data64_to_text
> cvt_ieee_s_to_text_ex
> cvt_ieee_t_to_text_ex
> cvt_ieee_x_to_text_ex
> cvt_text_to_ieee_s
> cvt_text_to_ieee_t
> cvt_text_to_ieee_x
> cvt_cray_to_ieee_double
> cvt_ibm_short_to_ieee_single
> cvt_ibm_long_to_ieee_double
> cvt_ieee_single_to_ibm_short
> cvt_ieee_single_to_vax_f
> cvt_ieee_double_to_cray
> cvt_ieee_double_to_ibm_long
> cvt_ieee_double_to_vax_d
> cvt_ieee_double_to_vax_g
> cvt_vax_f_to_ieee_single
> cvt_vax_d_to_ieee_double
> cvt_vax_g_to_ieee_double
> gmake: *** [cc_petra_multivector_serial] Error 1
> 
> 
> 
> -------------------
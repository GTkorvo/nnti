include $(TRILINOS_HOME)/build/TRILINOS_TARGET_DEFS
TRILINOS_TARGET = $(TRILINOS_ARCH).$(TRILINOS_COMM)$(TRILINOS_ID)
include $(TRILINOS_HOME)/build/makefile.$(TRILINOS_TARGET)

DEFINES= -D$(TRILINOS_ARCH) $(EPETRA_ARCH_DEFINES) -D$(EPETRA_COMM)

SUPERLU_INCLUDES = -I$(TRILINOS_HOME)/external/slu
INCLUDES = $(ARCH_INCLUDES) $(EPETRA_INCLUDES) $(SUPERLU_INCLUDES)

CFLAGS=$(ARCH_CFLAGS) $(DEFINES) $(INCLUDES)
FFLAGS=$(ARCH_FFLAGS) $(DEFINES) $(INCLUDES)
CXXFLAGS=$(ARCH_CXXFLAGS) $(DEFINES) $(INCLUDES) -DXyce_NEW_SLU
LDFLAGS=$(ARCH_LDFLAGS)

#=======================================================================
# EPETRA_SLU source files
#=======================================================================

LIBEPETRA_SLU= $(TRILINOS_HOME)/lib/$(TRILINOS_TARGET)/libepetra_slu.a

EPETRA_SLU_CC = Epetra_SLU.cpp

EPETRA_SLU_OBJ = $(EPETRA_SLU_CC:.cpp=.o)

$(LIBEPETRA_SLU): $(EPETRA_SLU_OBJ)
	mkdir -p $(TRILINOS_LIB_PATH)
	$(AR) $(ARFLAGS) $(LIBEPETRA_SLU) $(EPETRA_SLU_OBJ)
	$(RANLIB) $(LIBEPETRA_SLU)

clean:
	@rm -rf $(TRILINOS_TARGET)
	@rm -f *.o $(LIBEPETRA_SLU) *~ 


TRIBITS_INCLUDE_DIRECTORIES(REQUIRED_DURING_INSTALLATION_TESTING${CMAKE_CURRENT_SOURCE_DIR})


IF( HAVE_INTREPID_KOKKOSCORE AND KOKKOS_HAVE_CUDA)
  IF( TPL_ENABLE_MPI )
      CUDA_INCLUDE_DIRECTORIES( ${MPI_BASE_DIR}/include )
  ENDIF()

  CUDA_INCLUDE_DIRECTORIES( "." )
  CUDA_INCLUDE_DIRECTORIES( ${KokkosCore_INCLUDE_DIRS} 
                            ${Shards_INCLUDE_DIRS}
                            ${Intrepid_INCLUDE_DIRS})


  CUDA_COMPILE( OBJECTS_CUDA1 test_01_CU.cu )
  CUDA_COMPILE( OBJECTS_CUDA2 test_02_CU.cu )

TRIBITS_ADD_EXECUTABLE_AND_TEST(
  Test_01
  SOURCES ${OBJECTS_CUDA1}
  ARGS PrintItAll
  NUM_MPI_PROCS 1
  PASS_REGULAR_EXPRESSION "TEST PASSED"
  ADD_DIR_TO_NAME
  )

TRIBITS_ADD_EXECUTABLE_AND_TEST(
  Test_02
  SOURCES ${OBJECTS_CUDA2}
  ARGS PrintItAll
  NUM_MPI_PROCS 1
  PASS_REGULAR_EXPRESSION "TEST PASSED"
  ADD_DIR_TO_NAME
  )
ELSE()


TRIBITS_ADD_EXECUTABLE_AND_TEST(
  Test_01
  SOURCES test_01.cpp
  ARGS PrintItAll
  NUM_MPI_PROCS 1
  PASS_REGULAR_EXPRESSION "TEST PASSED"
  ADD_DIR_TO_NAME
  )

TRIBITS_ADD_EXECUTABLE_AND_TEST(
  Test_02
  SOURCES test_02.cpp
  ARGS PrintItAll
  NUM_MPI_PROCS 1
  PASS_REGULAR_EXPRESSION "TEST PASSED"
  ADD_DIR_TO_NAME
  )

ENDIF()

#!/usr/bin/env python

import sys
import os
import getopt

def main():
  (execDirName,execBaseName) = os.path.split(sys.argv[0])

  USAGE="usage: "+execBaseName+" [-h] [-v] [--name]"

  try:
      opts, args = getopt.getopt(sys.argv[1:], "hv", ["help", "verbose", \
                                                      "name"])
  except getopt.GetoptError:
      # print help information and exit:
      print USAGE
      sys.exit(2)

  verboseMode  = False
  nameFlag     = False
  for flag, value in opts:
      if flag in ("-h", "--help"):
          print USAGE
          sys.exit()
      if flag in ("-v", "--verbose"):
          verboseMode = True
      if flag == "--name":
          nameFlag = True

  for i in sys.path:
    dir = i.replace("/lib/","/include/")
    file = os.path.join(dir,"Python.h")
    if (os.access(file, os.R_OK)):
      # Pop name off of dir to get "python name"
      (dir, name) = os.path.split(dir)
      if nameFlag:
        print name
      else:
        # Pop /include off of dir to get "python home"
        (dir, dummy) = os.path.split(dir)
        assert (dummy == "include")
        print dir
      break

if (__name__ == '__main__'):
    main()

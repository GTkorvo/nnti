 \documentclass[12pt,relax]{EpetraUserGuide}
\usepackage{array}
\usepackage{fancyvrb}
    \title{\EpetraTM{} User Guide}
\SANDsubtitle{}

    \author{Michael A. Heroux, Robert J. Hoekstra and Alan Williams \\
	\\
	    Sandia National Laboratories\\
	    P.O. Box 5800\\
	    Albuquerque, NM 87185-1110 
	 }

    % There is a "Printed" date on the title page of a SAND report, so
    % the generic \date should generally be empty.
    \date{\today} % Remove ``\today'' in final version


\SANDnum{SAND2003-xxxx}
\SANDprintDate{Printed July 2003}
\SANDauthor{Michael A. Heroux \\
	Computational Mathematics and Algorithms Department \\
	\\
	Robert J. Hoekstra \\
	Computational Sciences Department \\
	\\
	Alan Williams \\
	Alan's Group Name \\
	\\
	 Sandia National Laboratories \\
	P.~O.~Box 5800 \\
	Albuquerque, NM 87185-1110}


\SANDreleaseType{Unlimited Release}


\SANDdistcategory{UC-999}    
% New commands

\newcommand{\comm}{Epetra\_Comm}
\newcommand{\serialcomm}{Epetra\_SerialComm}
\newcommand{\mpicomm}{Epetra\_MpiComm}
\newcommand{\mpismpcomm}{Epetra\_MpiSmpComm}
\newcommand{\lbcomm}{Epetra\_LbComm}
\newcommand{\map}{Epetra\_Map}
\newcommand{\blockmap}{Epetra\_BlockMap}
\renewcommand{\vector}{Epetra\_Vector}
\newcommand{\multivector}{Epetra\_MultiVector}
\newcommand{\crsgraph}{Epetra\_CrsGraph}
\newcommand{\crsmatrix}{Epetra\_CrsMatrix}
\newcommand{\vbrmatrix}{Epetra\_VbrMatrix}
\newcommand{\rowmatrix}{Epetra\_RowMatrix}


\begin{document}
\maketitle

\begin{abstract}

The \TrilinosTM{} Project is an effort to facilitate the design, development,
integration and ongoing support of mathematical software libraries.
One special Trilinos package is \EpetraTM{}.  Epetra provides a collections of
vector, graph and matrix objects that can be used on serial
and parallel computers.  It is designed to make construction, use and redistribution
of these objects as efficient and easy as possible.  Epetra objects are compatible with all
other Trilinos packages, including all linear, nonlinear and eigen solvers and all
preconditioners packages.  It also implements all Trilinos abstract interfaces and 
provides access to the Zoltan~\cite{zoltan-ug} load balancing package, and an object-oriented
interface to the BLAS~\cite{BLAS1,BLAS2,BLAS3} and LAPACK~\cite{lapack}.


This user guide is designed to address two types of users: 
(i) those who
are primarily interested in using already-constructed Epetra objects (such as 
numerical algorithm developers who want to implement algorithms via 
operations on Epetra vector, graph and matrix objects) and 
(ii) those who, in addition to using Epetra
objects, are also constructing Epetra vector, graphs and matrices.  This group
includes application developers who are constructing these objects for the purpose
of solving linear, nonlinear and eigensystems.

\end{abstract}


\section*{Acknowledgement}
The authors would like to acknowledge the support of the ASCI and LDRD 
programs that funded development of Epetra.

\clearpage
\tableofcontents
\listoffigures
\listoftables

\clearpage

\section*{Nomenclature}
\addcontentsline{toc}{section}{Nomenclature}
\begin{itemize}
\item[Trilinos]
The name of the project of which Epetra is one of the packages.  Also a Greek term which,
loosely translated means ``a string of pearls,'' 
meant to evoke an image that each Trilinos package is a pearl in its 
own right, but is even more valuable when combined with other 
packages.
\item[Petra]
A Greek term meaning ``foundation.''  Trilinos has three Petra 
libraries: Epetra, Tpetra and Jpetra that provide basic classes 
for constructing and manipulating matrix, graph and vector
objects.  Epetra is the current production version that is
split into two packages, one core and one extensions.
\item[Comm Object]
An instance of one of the Epetra Comm classes.  Presently we support
an MPI, Serial and SMP/MPI implementation of the base \comm{} interface.
\item[Map Object] 
Object-oriented algebraic preconditioner, compatible with 
Epetra and AztecOO.
\end{itemize}

NOTE: Add section on repeated use of Epetra objects.


\section{Introduction}
\label{Section:Introduction}

Epetra is a collection of C++ classes that support the construction
and use of common numerical linear algebra objects such as vectors,
graphs and matrices.  It is primarily designed for irregular, parallel
distributed memory computations, but can also be used on serial systems
with structured data.  This user guide is intended to (i) introduce a new
user to the basic features of Epetra, (ii) discuss in detail Epetra
object constructors, and (iii) illustrate the use of
Epetra's advance parallel data repartitioning capabilities to
experienced users.  This document is not intended as a reference
manual.  Detailed descriptions of Epetra classes and methods can be
found online at the Trilinos Project home page~\cite{Trilinos-home-page}.


\subsection{Overview of Major Epetra Classes and Feautures}

Epetra contains many classes and provides a wide spectrum of
functionality within these classes.  However, there is a relatively
short list of classes and features that are commonly used.  We discuss
these here.

\subsubsection{Communication Support}
Epetra is written to run on parallel, distributed memory computers.  It accomplishes 
this via its abstract \comm{} class.  \comm{} is a pure virtual class,
specifying the methods that Epetra needs in order to execute on a
distributed memory computer.  However, \comm{} provides no
implementation of these methods.  Instead, Epetra contains
several derived classes that implement the \comm{} interface,
providing the needed functionality.  In this way, Epetra is not
explicitly dependent on any one communication library or interface.
Presently we have three implementations of \comm{}:
\begin{enumerate}
\item {\bf \serialcomm{}: } Implements the \comm{}
methods to run on a serial computer.  In this case, the majority of
the methods have trivial implementations.  However, having the
\serialcomm{} class allows the rest of Epetra classes to be used
independently from the type of parallel computer being used and allows
serial use of Epetra within a parallel application.
\item {\bf \mpicomm{}: } Uses a user-provided MPI
communicator to implement the \comm{} methods.  In fact, many of the
\comm{} methods have a name similar to an existing MPI function.
Since MPI is by far the most common communication interface and
library used with Epetra, this bias to MPI function names is
intentional.
\item {\bf \mpismpcomm{}:} An experimental implementation that
incorporates information about shared memory threads.  This
implementation of \comm{} is intended for situations where threads,
e.g.~pthreads, are created and retained as part of the call to the 
\mpismpcomm{} constructor.  These threads can then be used by any
kernels in Epetra that have been instrumented to run with threads.  At
this point, \mpismpcomm{} is purely for research purposes.
\item {\bf \lbcomm{}: } A new version of \comm{} built using an MPI
communicator and special tuned implementations of basic communication
operations coming from the LB\_Comm library that is part of the Zoltan
load balancing library~\cite{zoltan-ug}.
\end{enumerate}

By using an abstract interface to provide distributed memory support,
Epetra allows for future development of novel parallel communication.
Also, although MPI is by far the most commonly used implementation of
\comm{}, Epetra has no explicit dependence on MPI and therefore MPI is
not required to build Epetra.

\subsubsection{Distributed Data Support}

Coupled with distributed memory communications, Epetra also provides
support for distributed data objects.  Users can constructed,
manipulate and redistribute Epetra objects in a flexible and powerful
way.  The primary classes that are used to describe the layout of
distributed objects are the \blockmap{} and \map{} classes.  Both of
these classes encode information about the distribution of {\it global
IDs (GIDs)}. GIDs are integer labels that can be associated
with elements of  Epetra distributed objects.  For example, the
elements of an \vector{} are the vector values and each
value of an \vector{} object is associated with a GID.
Similarly, each row of an \crsgraph{}, an \crsmatrix{} and an
\multivector{} is an element and is associated with a GID.  Multiple
elements can be associated with the same GID, but each element has a
unique GID.

\subsection{Primary Linear Algebra Classes}
Although there are many classes in Epetra, the core linear algebra classes are the
vector, graph and matrix classes.  A simple use of Epetra usually
involves the construction of a single \comm{} object, which is passed
in to the constructor of a single \map{} object and the resulting \map{}
is then used to construct any number of vector and matrix objects.
The primary Epetra linear algebra classes are as follows:
\begin{enumerate}
\item {\bf \vector{}: } Supports construction and use of distributed
vectors of double-precision numbers.  Once constructed, \vector{}
objects can be used in multiple ways.  Common operations

\end{enumerate}

\section{A First Example}

%\begin{Verbatim}[frame=single,numbers=left,commandchars=\\\{\}]
%\input{../../example/UG_Ex1/cxx_main.cpp}
%\end{Verbatim}
\begin{figure}
\begin{center}
\input{Ex1}
\end{center}
\label{Figure:FirstExample}
\caption{Simple Driver for Power Method Example}
\end{figure}

\begin{figure}
\begin{center}
\input{Ex1a}
\end{center}
\label{Figure:FirstExamplePowerMethod}
\caption{Simple Power Method Routine}
\end{figure}


\clearpage
\bibliographystyle{plain}
\bibliography{EpetraUserGuide}
\addcontentsline{toc}{section}{References}

\appendix
\section{Commonly Used CVS Commands}
\label{Section:CVS}
\section{Common Bugzilla Tasks}
\label{Section:Bugzilla}


\end{document}

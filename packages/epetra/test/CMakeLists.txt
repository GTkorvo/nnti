INCLUDE(Trilinos_Add_Executable)

# Syntax for adding an executable:
#   TRILINOS_ADD_EXECUTABLE(<SOURCE_DIR> [TEST] [MPITEST] [EXAMPLE] [INSTALL] SOURCES <SOURCE1> <SOURCE2> ... ARGS <ARG1> <ARG2> ...)

INCLUDE_DIRECTORIES(${Epetra_BINARY_DIR}/src)
INCLUDE_DIRECTORIES(${Epetra_SOURCE_DIR}/src)

LINK_LIBRARIES(epetra ${TRILINOS_LAPACK_LIBRARY} ${TRILINOS_BLAS_LIBRARY})

IF(TRILINOS_ENABLE_MPI)
	INCLUDE_DIRECTORIES(${MPI_INCLUDE_PATH})
	LINK_LIBRARIES(${MPI_LIBRARY} ${MPI_EXTRA_LIBRARY})
	SET(TEST_ARGUMENTS TEST MPITEST)
ELSE(TRILINOS_ENABLE_MPI)
	SET(TEST_ARGUMENTS TEST)
ENDIF(TRILINOS_ENABLE_MPI)

TRILINOS_ADD_EXECUTABLE(BlockMap ${TEST_ARGUMENTS} SOURCES cxx_main.cpp checkmap.cpp ARGS -v)

TRILINOS_ADD_EXECUTABLE(BasicPerfTest TEST INSTALL SOURCES cxx_main.cpp ARGS 16 12 1 1 25 -v)
IF(TRILINOS_ENABLE_MPI)
	STRING(REGEX MATCH "[0-9]+" MPI_NPROCS ${MPI_EXECUTABLE_FLAGS})
	TRILINOS_ADD_EXECUTABLE(BasicPerfTest MPITEST INSTALL SOURCES cxx_main.cpp ARGS 16 12 ${MPI_NPROCS} 1 25 -v)
ENDIF(TRILINOS_ENABLE_MPI)

TRILINOS_ADD_EXECUTABLE(Comm ${TEST_ARGUMENTS} SOURCES cxx_main.cpp ARGS -v)

TRILINOS_ADD_EXECUTABLE(CrsGraph ${TEST_ARGUMENTS} SOURCES cxx_main.cpp ARGS -v)

TRILINOS_ADD_EXECUTABLE(CrsMatrix ${TEST_ARGUMENTS} SOURCES cxx_main.cpp ARGS -v)

TRILINOS_ADD_EXECUTABLE(RowMatrix ${TEST_ARGUMENTS} SOURCES cxx_main.cpp ARGS -v)

TRILINOS_ADD_EXECUTABLE(CrsRectMatrix ${TEST_ARGUMENTS} SOURCES cxx_main.cpp ARGS -v)

TRILINOS_ADD_EXECUTABLE(Directory ${TEST_ARGUMENTS} SOURCES cxx_main.cpp ARGS -v)

TRILINOS_ADD_EXECUTABLE(FECrsGraph ${TEST_ARGUMENTS} SOURCES cxx_main.cpp ExecuteTestProblems.cpp ARGS -v)

# Not building on Windows
#TRILINOS_ADD_EXECUTABLE(FECrsMatrix ${TEST_ARGUMENTS} SOURCES cxx_main.cpp ExecuteTestProblems.cpp ARGS -v)

TRILINOS_ADD_EXECUTABLE(FEVbrMatrix ${TEST_ARGUMENTS} SOURCES cxx_main.cpp ExecuteTestProblems.cpp ARGS -v)

# Not building on Windows
#TRILINOS_ADD_EXECUTABLE(FEVector ${TEST_ARGUMENTS} SOURCES cxx_main.cpp ExecuteTestProblems.cpp ARGS -v)

TRILINOS_ADD_EXECUTABLE(ImportExport ${TEST_ARGUMENTS} SOURCES cxx_main.cpp ARGS -v)

TRILINOS_ADD_EXECUTABLE(IntSerialDense ${TEST_ARGUMENTS} SOURCES cxx_main.cpp ARGS -v)

TRILINOS_ADD_EXECUTABLE(Map ${TEST_ARGUMENTS} SOURCES cxx_main.cpp checkmap.cpp ARGS -v)

# This test was commented out in the AUTOTOOLS configuration:
TRILINOS_ADD_EXECUTABLE(MapColoring ${TEST_ARGUMENTS} SOURCES cxx_main.cpp ARGS -v)

TRILINOS_ADD_EXECUTABLE(MultiVector ${TEST_ARGUMENTS} SOURCES cxx_main.cpp BuildTestProblems.cpp ExecuteTestProblems.cpp ARGS -v)

TRILINOS_ADD_EXECUTABLE(Object ${TEST_ARGUMENTS} SOURCES cxx_main.cpp ARGS -v)

TRILINOS_ADD_EXECUTABLE(RowMatrixTransposer ${TEST_ARGUMENTS} SOURCES cxx_main.cpp ARGS -v)

TRILINOS_ADD_EXECUTABLE(SerialDense ${TEST_ARGUMENTS} SOURCES cxx_main.cpp ARGS -v)

TRILINOS_ADD_EXECUTABLE(SerialSpdDense ${TEST_ARGUMENTS} SOURCES cxx_main.cpp ARGS -v)

# Not building on Windows
#TRILINOS_ADD_EXECUTABLE(VbrMatrix ${TEST_ARGUMENTS} SOURCES cxx_main.cpp ARGS -v)

TRILINOS_ADD_EXECUTABLE(Vector ${TEST_ARGUMENTS} SOURCES cxx_main.cpp BuildTestProblems.cpp ExecuteTestProblems.cpp ARGS -v)


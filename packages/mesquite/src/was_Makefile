############################################
##            Mesquite makefile           ##
##            -----------------           ##
##  This makefile is not intended to be   ##
##  modified directly.  See 'compile.txt' ##
##  to see how to set up your build       ##
##  environment.                          ##
##                                        ##
############################################

include Makefile.customize

# Definitions of file sets
MESQUITE_SRCS = \
	SmartLaplacianSmoother.cpp \
	LaplacianSmoother.cpp \
	VertexMover.cpp \
	ConjugateGradient.cpp \
	TopologyModifier.cpp \
	MesquiteError.cpp \
	InstructionQueue.cpp \
	MeshSet.cpp \
	QualityAssessor.cpp \
	MsqVertex.cpp \
	MsqMeshEntity.cpp\
	QualityMetric.cpp\
        AspectRatioGammaQualityMetric.cpp\
	ConditionNumberQualityMetric.cpp\
	LaplacianQualityMetric.cpp\
        MeanRatioQualityMetric.cpp\
	MultiplyQualityMetric.cpp\
	LInfTemplate.cpp\
	LPTemplate.cpp\
	CompositeOFMultiply.cpp\
	CompositeOFScalarMultiply.cpp\
	CompositeOFAdd.cpp\
	CompositeOFScalarAdd.cpp\
	SteepestDescent.cpp\
	MinTemplate.cpp\
	PatchData.cpp \
	NonSmoothSteepestDescent.cpp\
	StoppingCriterion.cpp \
	MsqMessage.cpp\
	MsqTimer.cpp\
	ObjectiveFunction.cpp \
	MesquiteUtilities.cpp

MESQUITE_OBJS = ${MESQUITE_SRCS:.cpp=.o}

#DRIVER_SRCS = \
#	main.cpp \
#	CubitMesh.cpp
#
#DRIVER_OBJS = ${DRIVER_SRCS:.cpp=.o}
#
#default : mesquite.a

mesquite.a : ${MESQUITE_OBJS}
	@echo "Creating Mesquite Library..."
	@${ARCHIVER} $@ ${MESQUITE_OBJS}
	@echo "Creation of Mesquite Library complete."

depend :
	@${MAKEDEPEND} -f make.dependencies \
	${DEPEND_FLAGS} ${MESQUITE_SRCS}

clean :
	@rm -f *.o *~ ../include/*~
	@rm -rf SunWS_cache
	@rm -f mesquite.a

# This next line is here because of an oddity in the
# SunOS version of 'make'
/opt/SUNWspro/SC5.0/include/CC/rw/ctype :
	@:

.SUFFIXES : .o .cpp .cc

.cpp.o : 
	@echo "Compiling $<"
	${PREFIX} ${CXX} ${CXXFLAGS} -c -o $@ $<

include make.dependencies

# DO NOT DELETE

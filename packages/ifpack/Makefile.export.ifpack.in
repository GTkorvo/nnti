## Required dependency on epetra
include @abs_top_builddir@/../teuchos/Makefile.export.teuchos
include @abs_top_builddir@/../epetra/Makefile.export.epetra

## Optional dependencies
@HAVE_IFPACK_AMESOS_TRUE@include @abs_top_builddir@/../amesos/Makefile.export.amesos
@HAVE_IFPACK_AZTECOO_TRUE@include @abs_top_builddir@/../aztecoo/Makefile.export.aztecoo

## Optional dependency on thyra
@ENABLE_IFPACK_THYRA_TRUE@include @abs_top_builddir@/../thyra/Makefile.export.thyra
@ENABLE_IFPACK_THYRA_TRUE@IFPACK_THYRA_INCLUDES = \
@ENABLE_IFPACK_THYRA_TRUE@	-I@abs_top_srcdir@/thyra/src \
@ENABLE_IFPACK_THYRA_TRUE@	-I@abs_top_srcdir@/thyra/src/model_evaluator \
@ENABLE_IFPACK_THYRA_TRUE@	-I@abs_top_builddir@/thyra/src \
@ENABLE_IFPACK_THYRA_TRUE@	$(THYRA_INCLUDES)
@ENABLE_IFPACK_THYRA_TRUE@IFPACK_THYRA_LIBS = -L@abs_top_builddir@/thyra/src -lifpackthyra $(THYRA_LIBS)

_IFPACK_INCLUDES= \
  -I@abs_top_builddir@/src -I@abs_top_srcdir@/src \
  $(EPETRA_INCLUDES) \
  $(AZTECOO_INCLUDES) \
  $(TEUCHOS_INCLUDES) \
  $(AMESOS_INCLUDES) \
  $(IFPACK_THYRA_INCLUDES)

_IFPACK_LIBS= \
  $(IFPACK_THYRA_LIBS) \
  -L@abs_top_builddir@/src/ -lifpack \
  $(AMESOS_LIBS) \
  $(AZTECOO_LIBS) \
  $(EPETRA_LIBS) \
  $(TEUCHOS_LIBS)

# Note, libifpackthyra.* must come before libifpack.* since the prior depends on the latter

@USING_GNUMAKE_TRUE@IFPACK_INCLUDES  = $(shell @PERL_EXE@ @abs_top_srcdir@/config/strip_dup_incl_paths.pl $(_IFPACK_INCLUDES))
@USING_GNUMAKE_TRUE@IFPACK_LIBS      = $(shell @PERL_EXE@ @abs_top_srcdir@/config/strip_dup_libs.pl $(_IFPACK_LIBS))
@USING_GNUMAKE_FALSE@IFPACK_INCLUDES = $(_IFPACK_INCLUDES)
@USING_GNUMAKE_FALSE@IFPACK_LIBS     = $(_IFPACK_LIBS)

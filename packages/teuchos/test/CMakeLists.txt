INCLUDE(Trilinos_Add_Executable)

INCLUDE_DIRECTORIES(${Teuchos_BINARY_DIR}/src)
INCLUDE_DIRECTORIES(${Teuchos_SOURCE_DIR}/src)

LINK_LIBRARIES(teuchos ${TRILINOS_LAPACK_LIBRARY} ${TRILINOS_BLAS_LIBRARY})

IF(TRILINOS_ENABLE_MPI)
	INCLUDE_DIRECTORIES(${MPI_INCLUDE_PATH})
	LINK_LIBRARIES(${MPI_LIBRARY} ${MPI_EXTRA_LIBRARY})
	SET(TEST_ARGUMENTS TEST MPITEST)
ELSE(TRILINOS_ENABLE_MPI)
	SET(TEST_ARGUMENTS TEST)
ENDIF(TRILINOS_ENABLE_MPI)

TRILINOS_ADD_EXECUTABLE(BLAS ${TEST_ARGUMENTS} SOURCES cxx_main.cpp)
TRILINOS_ADD_EXECUTABLE(Comm ${TEST_ARGUMENTS} SOURCES Comm_test.cpp)
TRILINOS_ADD_EXECUTABLE(DenseMatrix ${TEST_ARGUMENTS} SOURCES cxx_main.cpp)
TRILINOS_ADD_EXECUTABLE(Handle ${TEST_ARGUMENTS} SOURCES cxx_main.cpp)
TRILINOS_ADD_EXECUTABLE(LAPACK ${TEST_ARGUMENTS} SOURCES cxx_main.cpp)
#TRILINOS_ADD_EXECUTABLE(MemoryManagement ${TEST_ARGUMENTS} SOURCES ArrayRCP_test.cpp ArrayView_test.cpp Ptr_test.cpp RCP_test.cpp TestClasses.hpp)
TRILINOS_ADD_EXECUTABLE(ScalarTraits ${TEST_ARGUMENTS} SOURCES ScalarTraits_test.cpp)
TRILINOS_ADD_EXECUTABLE(Time ${TEST_ARGUMENTS} SOURCES cxx_main.cpp)
TRILINOS_ADD_EXECUTABLE(Workspace ${TEST_ARGUMENTS} SOURCES cxx_main.cpp)
TRILINOS_ADD_EXECUTABLE(dyn_cast ${TEST_ARGUMENTS} SOURCES cxx_main.cpp)
#TRILINOS_ADD_EXECUTABLE(exit ${TEST_ARGUMENTS} SOURCES cxx_main.cpp)

IF(TRILINOS_ENABLE_MPI)
  STRING(REGEX MATCH "[0-9]+" MPI_NPROCS ${MPI_EXECUTABLE_FLAGS})
  IF(${MPI_NPROCS} GREATER 1)
      TRILINOS_ADD_EXECUTABLE(Polling MPITEST SOURCES cxx_main.cpp)
  ENDIF(${MPI_NPROCS} GREATER 1)
ENDIF(TRILINOS_ENABLE_MPI)

IF(TEUCHOS_ENABLE_EXTENDED)
	TRILINOS_ADD_EXECUTABLE(ParameterList ${TEST_ARGUMENTS} SOURCES cxx_main.cpp)
ENDIF(TEUCHOS_ENABLE_EXTENDED)


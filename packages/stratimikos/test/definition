#
# Main Stratimikos tests
#

(FRAMEWORK, INSTALL) {
    TESTS = ../example/simple_stratimikos_example.exe;
    ARGS =
      --linear-solver-params-file=../example/amesos.klu.xml      --matrix-file=../example/FourByFour.mtx --tol=1e-13,
      --linear-solver-params-file=../example/aztecoo.ifpack.xml  --matrix-file=../example/FourByFour.mtx --tol=1e-13,
      --linear-solver-params-file=../example/aztecoo.ml.xml      --matrix-file=../example/FourByFour.mtx --tol=1e-13,
      --linear-solver-params-file=../example/belos.ifpack.xml    --matrix-file=../example/FourByFour.mtx --tol=1e-13,
      --linear-solver-params-file=../example/belos.ml.xml        --matrix-file=../example/FourByFour.mtx --tol=1e-13,
      --extra-linear-solver-params="<ParameterList><Parameter name=\"Linear Solver Type\" type=\"string\" value=\"AztecOO\"/></ParameterList>"  --matrix-file=../example/FourByFour.mtx --tol=1e-10 --linear-solver-params-used-file=lowsf.aztecoo.used.xml,
      --extra-linear-solver-params="<ParameterList><Parameter name=\"Linear Solver Type\" type=\"string\" value=\"Amesos\"/></ParameterList>"  --matrix-file=../example/FourByFour.mtx --tol=1e-10 --linear-solver-params-used-file=lowsf.amesos.used.xml;
    COMM = MPI(1),SERIAL;
}

(FRAMEWORK, INSTALL) {
    TESTS = ./test_single_stratimikos_solver_driver.exe;
    ARGS = --input-file=FourByFour.xml,
           --input-file=FourByFour.amesos.xml,
           --input-file=FourByFour.aztecoo.np.xml,
           --input-file=FourByFour.aztecoo.ifpack.xml;
    COMM = MPI(1),SERIAL;
}

(FRAMEWORK, INSTALL) {
    TESTS = ../example/MixedOrderPhysicsBasedPreconditioner.exe;
    ARGS = --params-file=MixedOrderPhysicsBasedPreconditioner.Base.xml --base-dir=../example --solve-tol=1.0,
      --params-file=MixedOrderPhysicsBasedPreconditioner.Base.xml --extra-params-file=MixedOrderPhysicsBasedPreconditioner.P2SolveOutput.xml --base-dir=../example --solve-tol=1.0,
      --params-file=MixedOrderPhysicsBasedPreconditioner.Base.xml --extra-params-file=MixedOrderPhysicsBasedPreconditioner.AllSolveOutput.xml --base-dir=../example --solve-tol=1.0,
      --params-file=MixedOrderPhysicsBasedPreconditioner.Base.xml --extra-params-file=MixedOrderPhysicsBasedPreconditioner.P2SolveOutputMSolveOutputToFile.xml --base-dir=../example --solve-tol=1.0,
      --params-file=MixedOrderPhysicsBasedPreconditioner.Base.xml --extra-params-file=MixedOrderPhysicsBasedPreconditioner.P2SolveOutput.xml --base-dir=../example --use-algebraic-prec --solve-tol=1.0,
      --params-file=MixedOrderPhysicsBasedPreconditioner.Belos.xml --base-dir=../example --use-algebraic-prec --solve-tol=1e+5,
      --params-file=MixedOrderPhysicsBasedPreconditioner.Belos.xml --base-dir=../example --invert-P1 --solve-tol=1e+5;
    COMM = MPI(1),SERIAL;
}

(DOCUMENTATION) {
    TESTS = ../example/generate-sample-output.pl;
    COMM = MPI(1),SERIAL;
}


#
# Amesos/Stratimikos tests
#

(FRAMEWORK, INSTALL, StratimikosAmesos) {
    TESTS = ../adapters/amesos/test/test_amesos_thyra_driver.exe;
    ARGS = --matrix-dir=../adapters/amesos/test --show-all-tests;
    COMM = SERIAL;
}


#
# AztecOO/Stratimikos tests
#

(FRAMEWORK, INSTALL, AztecOOThyraTests) {
    TESTS = ../adapters/aztecoo/test/test_single_aztecoo_thyra_solver_driver.exe;
    ARGS = --matrix-file=../adapters/aztecoo/test/FourByFour.mtx --show-all-tests;
    X-HOST = paunchy;
    COMM = MPI(1), SERIAL;
}

(FRAMEWORK, INSTALL, AztecOOThyraTests) {
    TESTS = ../adapters/aztecoo/test/test_aztecoo_thyra_driver.exe;
    ARGS = --matrix-dir=../adapters/aztecoo/test --show-all-tests;
    X-HOST = paunchy;
    COMM = MPI(1), SERIAL;
}

(FRAMEWORK, INSTALL, AztecOOThyraTests) {
    TESTS = ../adapters/aztecoo/test/testEpetraOperatorWrapper.exe;
    X-HOST = paunchy;
    COMM = MPI(1), SERIAL;
}

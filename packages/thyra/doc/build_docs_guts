#!/bin/bash

if [ $TRILINOS_HOME ]; then
  echo "TRILINOS_HOME has already been set!"
else
  echo "TRILINOS_HOME has not been set.  Setting it!"
  export TRILINOS_HOME=`pwd`/../../..
fi

echo
echo "Generating LinearAlgebraFunctionConvention.pdf file ..."
echo

pushd ../../../doc/Thyra/linear_algebra_function_convention; make pdf ; popd
cp ../../../doc/Thyra/linear_algebra_function_convention/LinearAlgebraFunctionConvention.pdf ../src/interfaces/operator_vector/ana/fundamental/doc/html/.

echo
echo "Generating doxygen documentation for thyra/src/interfaces/operator_vector/ana/fundamental ..."
echo

pushd ../src/interfaces/operator_vector/ana/fundamental/doc ; ./generate_Doxyfile ; popd
doxygen ../src/interfaces/operator_vector/ana/fundamental/doc/Doxyfile

echo
echo "Generating doxygen documentation for thyra/src/interfaces/operator_vector/ana/extended ..."
echo

pushd ../src/interfaces/operator_vector/ana/extended/doc ; ./generate_Doxyfile ; popd
doxygen ../src/interfaces/operator_vector/ana/extended/doc/Doxyfile

echo
echo "Generating doxygen documentation for thyra/src/interfaces/operator_solve/ana/fundamental ..."
echo

pushd ../src/interfaces/operator_solve/ana/fundamental/doc ; ./generate_Doxyfile ; popd
doxygen ../src/interfaces/operator_solve/ana/fundamental/doc/Doxyfile

echo
echo "Generating doxygen documentation for thyra/src/interfaces/nonlinear/model_evaluator/ana/fundamental ..."
echo

pushd ../src/interfaces/nonlinear/model_evaluator/ana/fundamental/doc ; ./generate_Doxyfile ; popd
doxygen ../src/interfaces/nonlinear/model_evaluator/ana/fundamental/doc/Doxyfile

echo
echo "Generating doxygen documentation for thyra/src/interfaces/nonlinear/solvers/ana/fundamental ..."
echo

pushd ../src/interfaces/nonlinear/solvers/ana/fundamental/doc ; ./generate_Doxyfile ; popd
doxygen ../src/interfaces/nonlinear/solvers/ana/fundamental/doc/Doxyfile

echo
echo "Generating doxygen documentation for thyra/src/support/operator_vector ..."
echo

pushd ../src/support/operator_vector/doc ; ./generate_Doxyfile ; popd
doxygen ../src/support/operator_vector/doc/Doxyfile

# ToDo: Add more individual doxygen collections

echo
echo "Generating browser doxygen documentation for all of Thyra as a single doxygen documentation collection ..."
echo

pushd ../all/doc ; ./generate_Doxyfile ; popd
doxygen ../all/doc/Doxyfile


echo
echo "Generating main documentation page for thyra ..."
echo

./generate_Doxyfile
doxygen Doxyfile

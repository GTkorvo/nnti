<HTML>
<HEAD>
   <META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
   <META NAME="GENERATOR" CONTENT="Mozilla/4.04 [en] (X11; U; SunOS 4.1.3_U1 sun4m) [Netscape]">
   <META NAME="sandia.approved" CONTENT="SAND99-1377">
   <META NAME="author" CONTENT="karen devine, kddevin@sandia.gov">

   <TITLE>Zoltan User's Guide:  Initialization Interface</TITLE>
<!
  ------------------------
  | CVS File Information |
  ------------------------
  $RCSfile$
  $Author$
  $Date$
  $Revision$
>
</HEAD>
<BODY BGCOLOR="#FFFFFF">

<DIV ALIGN=right>
<H3>
<IMG SRC="figures/ug_header.gif" ALT="Zoltan User's Guide" ></H3></DIV>

<H2>
<A NAME="Initialization Functions"></A>Initialization Functions</H2>
Functions used to initialize the library and load-balancing data structures are
described below:
<UL><A HREF="#LB_Initialize">LB_Initialize</A>
<BR><A HREF="#LB_Create">LB_Create</A>
<BR><A HREF="#LB_Set_Fn">LB_Set_Fn</A></UL>

<HR WIDTH="100%">
<TABLE WIDTH="100%" NOSAVE >
<TR NOSAVE>
<TD VALIGN=TOP NOSAVE>C:</TD>

<TD><A NAME="LB_Initialize"></A>int <B>LB_Initialize</B>(int <I>argc</I>,
char **<I> argv</I>, float *<I> ver</I>);
<BR>&nbsp;</TD>
</TR>

<TR NOSAVE>
<TD VALIGN=TOP WIDTH="15%" NOSAVE>FORTRAN:</TD>

<TD> FUNCTION <B>LB_Initialize</B>( <I>argc</I>, <I>argv</I>,
<I>ver</I>)&nbsp;
<BR>INTEGER(LB_INT) :: LB_Initialize&nbsp;
<BR>INTEGER(LB_INT), INTENT(IN), OPTIONAL :: argc&nbsp;
<BR>CHARACTER(LEN=*), DIMENSION(*), INTENT(IN), OPTIONAL :: argv&nbsp;
<BR>REAL(LB_FLOAT), INTENT(OUT) :: ver&nbsp;</TD>
</TR>
</TABLE>

<HR WIDTH="100%">The <B>LB_Initialize</B> function initializes values needed
in the load-balancing tools. This function must be called with the <I>argc</I>
and <I>argv</I> command-line arguments from the main program. If the application
uses MPI, this function should be called after calling <B>MPI_Init</B>.
If the application does not use MPI, this function calls <B>MPI_Init</B>
for use by the load balancer. It also returns the version of the dynamic
load-balancing library so that users can verify which version of the library
their application is linked to.
<BR>From Fortran, if one of <I>argc</I> or <I>argv</I> is omitted, they
must both be omitted. If they are omitted, <I>ver</I> does NOT have to
be passed as a keyword argument.
<BR>&nbsp;
<TABLE WIDTH="100%" >
<TR>
<TD WIDTH="20%"><B>Parameters:</B></TD>

<TD>&nbsp;</TD>
</TR>

<TR>
<TD VALIGN=TOP><I>&nbsp;&nbsp;&nbsp; argc</I></TD>

<TD>The number of command-line arguments to the application.</TD>
</TR>

<TR>
<TD VALIGN=TOP><I>&nbsp;&nbsp;&nbsp; argv</I></TD>

<TD>An array of strings containing the command-line arguments to the application.</TD>
</TR>

<TR>
<TD VALIGN=TOP><I>&nbsp;&nbsp;&nbsp; ver</I></TD>

<TD>The version number of the library.</TD>
</TR>

<TR>
<TD><B>Returned Value:</B></TD>

<TD></TD>
</TR>

<TR>
<TD VALIGN=TOP>&nbsp;&nbsp;&nbsp; int</TD>

<TD VALIGN=TOP><A HREF="ug_interface.html#Error Codes">Error code</A>.</TD>
</TR>
</TABLE>
&nbsp;

<P>
<HR WIDTH="100%">
<TABLE WIDTH="100%" NOSAVE >
<TR NOSAVE>
<TD VALIGN=TOP NOSAVE>C:</TD>

<TD><A NAME="LB_Create"></A>struct <B>LB_Struct</B> *<B>LB_Create</B>(MPI_Comm
<I>communicator</I>);&nbsp;
<BR>&nbsp;</TD>
</TR>

<TR NOSAVE>
<TD VALIGN=TOP WIDTH="15%" NOSAVE>FORTRAN:</TD>

<TD>FUNCTION <B>LB_Create</B>(<I>communicator</I>)&nbsp;
<BR>TYPE(LB_Struct), pointer :: LB_Create&nbsp;
<BR>INTEGER, INTENT(IN) :: communicator&nbsp;</TD>
</TR>
</TABLE>

<HR WIDTH="100%">The <B>LB_Create</B> function allocates memory
for storage of load-balancing information to be used by the load-balancing
library and sets the default values for the load- balancing information.
The pointer returned by this function is passed to many subsequent load-balancing
functions. An application may allocate more than one <B>LB_Struct</B> data
structure if, say, it uses different decompositions with different 
load-balancing techniques.
<BR>&nbsp;
<TABLE WIDTH="100%" >
<TR>
<TD WIDTH="20%"><B>Parameters:</B></TD>

<TD></TD>
</TR>

<TR>
<TD VALIGN=TOP><I>&nbsp;&nbsp;&nbsp; communicator</I></TD>

<TD>The MPI communicator to be used for this load-balancing structure. Only
those processors included in the communicator participate in load balancing.
If all processors currently used by the application are to participate
in load balancing, communicator should be <B>MPI_COMM_WORLD</B> .</TD>
</TR>

<TR>
<TD><B>Returned Value:&nbsp;</B></TD>

<TD></TD>
</TR>

<TR>
<TD VALIGN=TOP>&nbsp;&nbsp;&nbsp; struct <B>LB_Struct</B> *</TD>

<TD>Pointer to memory for storage of load-balancing information. If an
error occurs, NULL will be returned in C, or the result will be a nullified
pointer in Fortran. Any error that occurs in this function is assumed to
be fatal.</TD>
</TR>
</TABLE>
&nbsp;
<BR>
<HR WIDTH="100%">
<TABLE WIDTH="100%" NOSAVE >
<TR NOSAVE>
<TD VALIGN=TOP NOSAVE>C:</TD>

<TD><A NAME="LB_Set_Fn"></A>int <B>LB_Set_Fn</B> (struct <B>LB_Struct </B>*
<I>lb, </I><B>LB_FN_TYPE</B> <I>fn_type</I>, void *<I>fn_ptr</I>, void
*<I>data</I>);
<BR>&nbsp;</TD>
</TR>

<TR NOSAVE>
<TD VALIGN=TOP WIDTH="15%" NOSAVE>FORTRAN:</TD>

<TD>FUNCTION <B>LB_Set_Fn</B>(<I>lb, fn_type, fn_ptr, data</I>)&nbsp;
<BR>INTEGER(LB_INT) :: LB_Set_Fn&nbsp;
<BR>TYPE(LB_Struct), INTENT(IN) :: lb&nbsp;
<BR>TYPE(LB_Fn_Type), INTENT(IN) :: fn_type&nbsp;
<BR>EXTERNAL :: fn_ptr&nbsp;
<BR>&lt;<I>type-data</I>>, OPTIONAL :: data&nbsp;

<P>&lt;<I>type-data</I>> can be any of INTEGER(LB_INT), DIMENSION(*) or
REAL(LB_FLOAT), DIMENSION(*) or REAL(LB_DOUBLE), DIMENSION(*) or TYPE(LB_User_Data_<I>x</I>)
where <I>x</I> is 1, 2, 3 or 4. See the section on
<A HREF="ug_fortran_api.html#fortran ug api query"> Fortran query functions</A>
for an explanation.&nbsp;</TD>
</TR>
</TABLE>

<HR WIDTH="100%"><B>LB_Set_Fn</B> registers an application-supplied query
function in the load-balancing library. Both load-balancing and migration-help
functions are registered through calls to <B>LB_Set_Fn</B> .
<BR>&nbsp;
<TABLE WIDTH="100%" >
<TR>
<TD VALIGN=TOP WIDTH="20%"><B>Parameters:</B></TD>

<TD></TD>
</TR>

<TR>
<TD VALIGN=TOP><I>&nbsp;&nbsp;&nbsp; lb</I></TD>

<TD>Pointer to the load-balancing structure created by
<B><A HREF="#LB_Create">LB_Create</A></B>.</TD>
</TR>

<TR>
<TD VALIGN=TOP><I>&nbsp;&nbsp;&nbsp; fn_type</I></TD>

<TD>The type of function being registered; see <A HREF="ug_query.html#Application-Registered Query Functions">Application-Registered
Query Functions</A> for possible function types.</TD>
</TR>

<TR>
<TD VALIGN=TOP><I>&nbsp;&nbsp;&nbsp; fn_ptr</I></TD>

<TD>A pointer to the application-supplied query function being registered.</TD>
</TR>

<TR>
<TD VALIGN=TOP><I>&nbsp;&nbsp;&nbsp; data</I></TD>

<TD>A pointer to user defined data that will be passed, as an argument,
to the function pointed to by fn_ptr . In C it may be NULL. In Fortran
it may be omitted.</TD>
</TR>

<TR>
<TD><B>Returned Value:</B></TD>

<TD></TD>
</TR>

<TR>
<TD VALIGN=TOP>&nbsp;&nbsp;&nbsp; int</TD>

<TD><A HREF="ug_interface.html#Error Codes">Error code</A>.</TD>
</TR>
</TABLE>
&nbsp;

<P>
<HR WIDTH="100%">[<A HREF="ug.html">Table of Contents</A>&nbsp; |&nbsp;
<A HREF="ug_interface_lb.html">Next:&nbsp; Load-Balancing Functions</A>&nbsp;
|&nbsp; <A HREF="ug_interface.html">Previous:&nbsp; Zoltan Interface Functions</A>]
</BODY>
</HTML>

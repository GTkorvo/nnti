<HTML>
<HEAD>
   <META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
   <META NAME="GENERATOR" CONTENT="Mozilla/4.04 [en] (X11; U; SunOS 4.1.3_U1 sun4m) [Netscape]">
   <META NAME="sandia.approved" CONTENT="SAND99-1376">
   <META NAME="author" CONTENT="karen devine, kddevin@sandia.gov">

   <TITLE> Zoltan Developer's Guide:  Timing Utilities</TITLE>
<!
  ------------------------
  | CVS File Information |
  ------------------------
  $RCSfile$
  $Author$
  $Date$
  $Revision$
>
</HEAD>
<BODY BGCOLOR="#FFFFFF">

<DIV ALIGN=right>
<H3>
<IMG SRC="figures/dev_header.gif" ALT="Zoltan Developer's Guide" ></H3></DIV>

<H2>
<A NAME="Timing"></A>Timing Utilities</H2>
To assist in performance measurements and profiling, several timing routines
are included in the Zoltan library. The main timer function, <B>LB_Time,</B>
provides access to at least two portable timers: one CPU clock and one
wall clock.

<P>The routines included in the utility are listed below.
<BLOCKQUOTE><B><A HREF="#LB_Time">LB_Time</A></B>: Returns the time (in
seconds) after some fixed point in time.
<BR><B><A HREF="#LB_Time_Resolution">LB_Time_Resolution</A></B>:&nbsp;
The resolution of the current clock (timer).</BLOCKQUOTE>
One can select which timer to use via <B><A HREF="dev_util_params.html#LB_Set_Param">LB_Set_Param</A></B>.
Currently, the following values for <I>TIMER</I> are supported:
<BLOCKQUOTE><I>wall </I>: wall-clock time. On most systems, this timer
calls MPI_Wtime.
<BR><I>cpu</I>&nbsp; : cpu time.&nbsp; On most systems, this timer calls
the ANSI C function clock(). Note that this timer may roll over at just
36 minutes. LB_Time attempts to keep track of the number of roll-overs
but this feature will work only if LB_Time is called at least once during
every period between roll-overs.</BLOCKQUOTE>
The default value of <I>TIMER</I> is <I>wall</I>. The timer setting is
global. Consequently, one cannot use different timers for different load-balancing
structures.

<P>
<HR><A NAME="LB_Time"></A>double <B>LB_Time</B>(void);&nbsp;
<HR>

<P><B>LB_Time</B> returns the time in seconds, measured from some fixed
reference time. Note that the time is <I>not </I>synchronized among different
processors or processes. The time may be either CPU time or wall-clock
time. The timer is selected through <B><A HREF="../ug_html/ug_interface_lb.html#LB_Set_Param">LB_Set_Param</A></B>.
<BR>&nbsp;
<TABLE WIDTH="100%" >
<TR VALIGN=TOP>
<TD VALIGN=TOP WIDTH="20%"><B>Parameters:</B></TD>

<TD></TD>
</TR>

<TR>
<TD VALIGN=TOP>&nbsp;</TD>

<TD>None.</TD>
</TR>

<TR>
<TD><B>Returned Value:</B></TD>

<TD></TD>
</TR>

<TR>
<TD VALIGN=TOP>&nbsp;&nbsp; double&nbsp;</TD>

<TD>The time in seconds.&nbsp;</TD>
</TR>
</TABLE>
&nbsp;

<P>
<HR><A NAME="LB_Time_Resolution"></A>double <B>LB_Time_Resolution</B>(void)
;&nbsp;
<HR>
<BR><B>LB_Time_Resolution</B> returns the resolution of the current timer.
<BR>&nbsp;
<TABLE WIDTH="100%" >
<TR VALIGN=TOP>
<TD VALIGN=TOP WIDTH="20%"><B>Parameters:</B></TD>

<TD></TD>
</TR>

<TR>
<TD VALIGN=TOP>&nbsp;</TD>

<TD>None.</TD>
</TR>

<TR>
<TD><B>Returned Value:</B></TD>

<TD></TD>
</TR>

<TR>
<TD VALIGN=TOP>&nbsp;&nbsp; double&nbsp;</TD>

<TD>The timer resolution in seconds.&nbsp; If the resolution is unknown,
zero is returned.</TD>
</TR>
</TABLE>
&nbsp;
<BR>&nbsp;

<P>
<HR><A NAME="Example"></A>
<BR><B>Example:</B>
<BR>Here is a typical example for how to use the timer routines:
<UL>double t0, t1, t2;
<BR>LB_Set_Param(NULL, "TIMER", "wall");
<BR>t0 = LB_Time();
<BR>/* code segment 1&nbsp; */
<BR>t1 = LB_Time();
<BR>/* code segment 2&nbsp; */
<BR>t2 = LB_Time();
<BR>/* Print timing results */
<BR>LB_Print_Stats(lb, t1-t0, "Time for part 1:");
<BR>LB_Print_Stats(lb, t2-t1, "Time for part 2:");
<BR>LB_Print_Stats(lb, t2-t0, "Total time :");</UL>

<HR WIDTH="100%">
<BR>[<A HREF="dev.html">Table of Contents</A>&nbsp; |&nbsp; <A HREF="dev_add.html">Next:&nbsp;
Adding New Load-Balancing Algorithms</A> |&nbsp; <A HREF="dev_util_parallel.html">Previous:&nbsp;
Parallel Utilities</A>]
</BODY>
</HTML>

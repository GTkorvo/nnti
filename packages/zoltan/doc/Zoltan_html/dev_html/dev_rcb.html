<HTML>
<HEAD>
   <META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
   <META NAME="GENERATOR" CONTENT="Mozilla/4.04 [en] (X11; U; SunOS 5.6 sun4m) [Netscape]">
   <META NAME="sandia.approved" CONTENT="SAND99-1376">
   <META NAME="author" CONTENT="karen devine, kddevin@sandia.gov">
   <TITLE> Zoltan Developer's Guide:  RCB</TITLE>
<!
  ------------------------
  | CVS File Information |
  ------------------------
  $RCSfile$
  $Author$
  $Date$
  $Revision$
>
</HEAD>
<BODY BGCOLOR="#FFFFFF">

<DIV ALIGN=right>
<H3>
<IMG SRC="figures/dev_header.gif" ALT="Zoltan Developer's Guide" ></H3></DIV>

<H2>
<A NAME="RCB"></A>Appendix: Recursive Coordinate Bisection (RCB)</H2>
&nbsp;

<P>The implementation of Recursive Coordinate Bisection (RCB) in Zoltan
is due to Steve Plimpton of Sandia National Laboratories and was modified
by Matt St. John and Courtenay Vaughan. In this implementation of RCB,
the parallel computer is first divided into two pieces and then the computational
domain is divided into two pieces such that the proportion of work in each
half is the same as the proportion of computational power. The division
of the parallel machine is done by a subroutine which is part of the support
for heterogenous architectures that is being built into the Zoltan library.
This process is repeated recursively on each subdomain and its associated
part of the computer. Each of these divisions are done with a cutting plane
that is orthogonal to one of the coordinate axes.

<P>At each of these stages, each subdomain of processors and the objects
that are contained on those processors are divided into two sets based
on which side of the cutting plane each object is on. Either or both of
these sets may be empty. On each processor, the set of objects which are
on the same side of the cut as the processor are retained by the processor,
while the other objects are sent to processors on the other side of the
cut. In order to minimize the maximun memory usage in each set of processors,
the objects that are being sent to each set of processors are distributed
such that each each processor in a set has about the same number of objects
after the objects from the other set of processors are sent. In the case
when a processor has more objects that it will retain than the average
number of objects that the rest of the processors have in its set, then
that processor will not receive no objects. Thus each processor may send
and receive objects from several (or no) processors in the other set. The
process of determining which outgoing objects are sent to which processors
is determined in the subroutine <B>create_proc_list</B>. Once this new
distribution of objects is determined, the <B><A HREF="dev_util_comm.html">irregular
communication package</A></B> in Zoltan is used to determine which processors
are going to receive which objects and actually move the objects.

<P>For applications which wish to add more objects to the decomposition
at a later time, information can be retained during the decomposition phase.
This information is kept in the form of a tree if the parameter KEEP_CUTS
is set during the decomposition (see the RCB section in the <B><A HREF="../ug_html/ug_alg_rcb.html#RCB">Zoltan
User's Guide</A></B>). At each step in the decomposition, each set is divided
into two sets. The cut designates a node in the tree and the two sets are
the leaves of that node. The set with the lowest numbered processor is
designated to be the left leaf and the cut is stored in the lowest numbered
processor in the other set of processors which is the right leaf. This
processor also stores the root node as its parent. After the end of the
division process, all of the information is collected onto all of the processors.
The parent information is used to establish the leaf information for the
parent. Since there is one fewer cut than the total number of processors,
processor 0 has no cut information and stores the processor that contains
the first cut as its right leaf. When this information is used to process
an object, the object is recursively tested against the cuts. At each step,
the cut information is used to determine which side of the cut the object
is on and which leaf processor needs to be consulted for the next step.
This process is repeated until the processor set is a single processor,
which is the desired processor.
<BR>&nbsp;
<BR>&nbsp;
<BR>&nbsp;

<P>
<HR WIDTH="100%">
<BR>[<A HREF="dev.html">Table of Contents</A>&nbsp; |&nbsp; <A HREF="dev_test_script.html">Previous:&nbsp;
Using the Test Script</A> |&nbsp; <A HREF="../Zoltan.html">Zoltan Home
Page</A>]
</BODY>
</HTML>

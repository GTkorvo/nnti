<HTML>
<HEAD>
   <META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
   <META NAME="GENERATOR" CONTENT="Mozilla/4.04 [en] (X11; U; SunOS 4.1.3_U1 sun4m) [Netscape]">
   <TITLE> Zoltan Developer's Guide: Using Test Driver - zdrive</TITLE>
<!
  ------------------------
  | CVS File Information |
  ------------------------
  $RCSfile$
  $Author$
  $Date$
  $Revision$
>
</HEAD>
<BODY BGCOLOR="#FFFFFF">

<DIV ALIGN=right>
<H3>
<IMG SRC="figures/dev_header.gif" ALT="Zoltan Developer's Guide" ></H3></DIV>

<H2>
<A NAME="Zdrive"></A>Appendix: Using the Test Driver - <I>zdrive</I></H2>

<H3>
<A NAME="Introduction"></A>Introduction</H3>
In order to facilitate development and testing of the Zoltan library, a
simple driver program, <I>zdrive</I>,&nbsp; is included with the library
distribution. The concept behind this driver is to read in mesh or graph
information from files, run Zoltan, and then output the new assignments
for each processor to another file. The test driver reads ExodusII/NemesisI
parallel FEM files and Chaco input files. Parallel NemesisI files can be
created from ExodusII or Genesis file using the NemesisI utilities <I>nem_slice</I>
and <I>nem_spread</I>.

<P>All source code for the driver is in the <I>driver/</I> directory of
the Zoltan distribution. In order to compile the test driver for a specific
platform, use the following command:
<UL>gmake [options] &lt;platform>-dr</UL>
where &lt;platform> is the target OS platform and the options are described
below. Currently, the supported platforms are <I>sun</I> (for Solaris)<I>,
sunos</I> (for SunOS<I>), tflop, cplant, </I>and <I>smos</I>. The driver
<I>zdrive</I> will be placed in the Obj_&lt;platform>/ directory.
<TABLE WIDTH="100%" >
<TR>
<TD WIDTH="20%"><B>Options to gmake:</B></TD>

<TD>&nbsp;</TD>
</TR>

<TR>
<TD VALIGN=TOP><I>&nbsp;&nbsp;&nbsp; NO_PARMETIS=1</I></TD>

<TD>Do not compile and link with <A HREF="../ug_html/ug_alg_parmetis.html">ParMETIS</A>
in the Zoltan library.&nbsp; If this option is specified, no <A HREF="../ug_html/ug_alg_parmetis.html">ParMETIS</A>
librares are needed for linking.&nbsp; Otherwise, a <A HREF="../ug_html/ug_alg_parmetis.html">ParMETIS</A>
library path must be specified in the Makefile.</TD>
</TR>

<TR>
<TD VALIGN=TOP><I>&nbsp;&nbsp;&nbsp; NO_NEMESIS=1</I></TD>

<TD>Do not compile and link with ExodusII and NemesisI in zdrive.&nbsp;
If this option is specified, only Chaco input will be accepted by the driver.&nbsp;
Otherwise, paths to the ExodusII and NemesisI libraries must be specified
in the Makefile.</TD>
</TR>
</TABLE>
&nbsp;
<H3>
<A NAME="running zdrive"></A>Running <I>zdrive</I></H3>
Zdrive is run using an input command file. A fully commented example of
this file and the possible options can be found in <I><A HREF="zdrive.inp">zdrive.inp</A></I>.
The default name for the command file is zdrive.inp, and the driver will
look for this file in the execution directory if an alternate name is not
given on the command line. If another filename is being used for the command
file, it should be specified as the first argument on the command line.
For an example of a simple input file for a problem on the Intel Paragon
sipapu, see the <A HREF="#zdrive input">figure</A> below. In this problem,
there are four parallel mesh files named <I>testa.par.4.0</I>... <I>testa.par.4.3</I>,
and they reside in the directories <I>pfs/io_01... io_04/mmstjohn/</I>
respectively. The method being used for dynamic load balancing is <A HREF="dev_rcb.html#RCB">RCB</A>.
All of the parameters are set to defaults by Zoltan since none are set
in the input file.
<BR>&nbsp;
<CENTER><TABLE BORDER=2 COLS=1 WIDTH="90%" NOSAVE >
<TR>
<TD><A NAME="zdrive input"></A>File Type&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
= NemesisI&nbsp;
<BR>File Name&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
= testa.par&nbsp;
<BR>Parallel Disk Info&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
= number=4,zeros&nbsp;
<BR>Parallel File Location&nbsp;&nbsp;&nbsp; = root=/pfs/io_, subdir=mmstjohn&nbsp;
<BR>Decomposition Info&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = method=RCB</TD>
</TR>

<CAPTION ALIGN=BOTTOM><I><FONT SIZE=-1>example zdrive.inp file</FONT></I></CAPTION>
</TABLE></CENTER>
&nbsp;
<BR>After running zdrive, an ascii file named <I>testa.par.out.4.0... testa.par.out.4.3
</I>will be created for each processor in the same directory where the
input FEM file was located for that processor. Each file will contain a
list of global ids for the elements that are on that processor after running
Zoltan.
<H3>
<A NAME="adding algorithms"></A>Adding New Algorithms</H3>
The driver has been set up in such a way that testing new algorithms that
have been added to Zoltan is relatively simple. The method that is in the
input file is passed directly to Zoltan. Thus, this string must be the
same string that the library function <A HREF="../ug_html/ug_interface_lb.html#LB_Set_Method">LB_Set_Method
</A>is expecting.

<P>
<HR WIDTH="100%">
<BR>[<A HREF="dev.html">Table of Contents</A>&nbsp; |&nbsp; <A HREF="dev_rcb.html">Next:&nbsp;
Recursive Coordinate Bisection</A>&nbsp; |&nbsp; <A HREF="dev_refs.html">Previous:&nbsp;
References</A>]
</BODY>
</HTML>

<HTML>
<HEAD>
   <META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
   <META NAME="GENERATOR" CONTENT="Mozilla/4.04 [en] (X11; U; SunOS 4.1.3_U1 sun4m) [Netscape]">
   <META NAME="sandia.approved" CONTENT="SAND99-1376">
   <META NAME="author" CONTENT="karen devine, kddevin@sandia.gov">

   <TITLE> Zoltan Developer's Guide:  Adding Parameters</TITLE>
<!
  ------------------------
  | CVS File Information |
  ------------------------
  $RCSfile$
  $Author$
  $Date$
  $Revision$
>
</HEAD>
<BODY BGCOLOR="#FFFFFF">

<DIV ALIGN=right>
<H3>
<IMG SRC="figures/dev_header.gif" ALT="Zoltan Developer's Guide" ></H3></DIV>

<H2>
<A NAME="new_parameters"></A>Parameters</H2>

<!-- BAH This is obsolete and needs to be rewritten

Parameters to be passed to the new load-balancing algorithm are assigned
through the <I>parameters</I> argument to <B><A HREF="../ug_html/ug_interface_lb.html#LB_Set_Method">LB_Set_Method</A></B>.
The parameters array is of size <B>LB_PARAMS_MAX_SIZE</B>, defined in <I>lb/lbi_const.h</I>.
An application call to <B><A HREF="../ug_html/ug_interface_init.html#LB_Initialize_Params_Array">LB_Initialize_Params_Array</A></B>
initializes the entries of the array to <B>LB_PARAMS_INIT_VALUE</B>, defined
in <I>lb/lb_const.h</I>. The application may then reset particular array
entries to desired parameter values before passing the array to the load-balancing
library in <B><A HREF="../ug_html/ug_interface_lb.html#LB_Set_Method">LB_Set_Method</A></B>.
New algorithms should compare <I>lb->Params</I> entries to <B>LB_PARAMS_INIT_VALUE</B>.
If an entry equals <B>LB_PARAMS_INIT_VALUE</B>, the algorithm should use
its default value for that parameter; if an entry does not equal <B>LB_PARAMS_INIT_VALUE</B>,
the application-supplied value should be used. An example of this testing
and initialization for the RCB algorithm is shown in the <A HREF="#params fig">figure</A>
below.&nbsp; Two parameters in the algorithm, <I>overalloc</I> and <I>reuse</I>,
can be set through the <I>lb->Params </I>array. If the application passes
a NULL array to the load-balancing library, or if the values in the array
are unchanged from <B>LB_PARAMS_INIT_VALUE</B>, the RCB algorithm's default
values are used to set <I>overalloc</I> and <I>reuse</I>. Otherwise, the
application-supplied values are used.
<BR>&nbsp;
<BR>&nbsp;
<CENTER><TABLE BORDER=2 COLS=1 WIDTH="90%" NOSAVE >
<TR>
<TD><A NAME="params fig"></A>
<BR><TT>if (lb->Params == NULL) {</TT>
<BR><TT>&nbsp;&nbsp; /*</TT>
<BR><TT>&nbsp;&nbsp;&nbsp; *&nbsp; No application-specified parameters;
use defaults.</TT>
<BR><TT>&nbsp;&nbsp;&nbsp; */</TT>
<BR><TT>&nbsp;&nbsp; overalloc = RCB_DEFAULT_OVERALLOC;</TT>
<BR><TT>&nbsp;&nbsp; reuse = RCB_DEFAULT_REUSE;</TT>
<BR><TT>}</TT>
<BR><TT>else {</TT>
<BR><TT>&nbsp;&nbsp; if (lb->Params[0] == LB_PARAMS_INIT_VALUE)</TT>
<BR><TT>&nbsp;&nbsp;&nbsp; overalloc = RCB_DEFAULT_OVERALLOC;</TT>
<BR><TT>&nbsp;&nbsp; else</TT>
<BR><TT>&nbsp;&nbsp;&nbsp; overalloc = lb->Params[0];</TT><TT></TT>

<P><TT>&nbsp;&nbsp; if (lb->Params[1] == LB_PARAMS_INIT_VALUE)</TT>
<BR><TT>&nbsp;&nbsp;&nbsp; reuse = RCB_DEFAULT_REUSE;</TT>
<BR><TT>&nbsp;&nbsp; else</TT>
<BR><TT>&nbsp;&nbsp;&nbsp; reuse = lb->Params[1];</TT>
<BR><TT>}</TT></TD>
</TR>

<CAPTION ALIGN=BOTTOM><I>Example of initialization of algorithm parameters
using the lb->Params array set by the application in LB_Set_Method.&nbsp;
(Taken from lb_rcb in rcb/rcb.c.)</I></CAPTION>
</TABLE></CENTER>
&nbsp;
<BR>&nbsp;
-->
<BR>
<HR WIDTH="100%">
<BR>[<A HREF="dev.html">Table of Contents</A>&nbsp; |&nbsp; <A HREF="dev_mig.html">Next:&nbsp;
Migration-Help Tools</A>&nbsp; |&nbsp; <A HREF="dev_add_struct.html">Previous:&nbsp;
Data Structures</A>]
</BODY>
</HTML>

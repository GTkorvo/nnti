F90 = f90
CC = cc
SPPR_HEAD = spprinc.most

structsize: structsizef.o structsizec.o
	$(F90) -o structsize structsizef.o structsizec.o lb_user_const.o ztypes.o

lb_user_const.o: lb_user_const.f90 ztypes.o
	$(F90) -c lb_user_const.f90

ztypes.o: ztypes.f90
	$(F90) -c ztypes.f90

ztypes.f90: ztypes.fpp sppr sppr_header
	./sppr < ztypes.fpp > ztypes.f90

sppr_header: $(SPPR_HEAD)
	cp $(SPPR_HEAD) sppr_header

sppr: sppr.f90
	$(F90) -o sppr sppr.f90

structsizef.o: structsizef.f90 lb_user_const.o
	$(F90) -c structsizef.f90

structsizec.o: structsizec.c
	$(CC) -c structsizec.c

clean:
	rm -f *.o ztypes.f90 *.mod debug V* *.vo *.dbg sppr \
	      sppr_header structsize
	rm -Rf album

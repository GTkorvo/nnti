#############################################################################
#
# Commands to run pass/fail tests
# 
# This is to be included from the makefile in the examples/Tests directory.
# That makefile should contain the following:
# (1) definitions of macros TESTS and PTEST listing the source files
#     for the serial and parallel tests to be run.
# (2) a definition of the NPROC macro specifying the number of processors
#     to be used in parallel tests.
# (3) a definition of the FILES_TO_CLEAN macro listing any temporary files
#     generated by the tests that should be cleaned up.
# (4) A directive to include this file, Makefile.tests.
#
# Kevin Long, 01/29/2001
# 
#############################################################################

include ../../Build/Makefile.site
include ../../Build/Makefile.tsf


tests:
	(cd Results; $(MKDIR) $(BUILD_NAME))
	(cd Results; $(CP) processTestResults.sh $(BUILD_NAME))
	gmake $(TESTS)
	(cd Results/$(BUILD_NAME); ./processTestResults.sh)

parallelTests:
	(cd ParallelResults; $(MKDIR) $(BUILD_NAME); $(CP) processPTestResults.sh $(BUILD_NAME))
	gmake $(PTESTS)
	(cd ParallelResults/$(BUILD_NAME); processPTestResults.sh)	

clean:
	$(RM) Results/$(BUILD_NAME)/*.tst
	$(RM) ParallelResults/$(BUILD_NAME)/*.ptst
	$(RM) *.e 
	$(RM) *.o
	$(ADDITIONAL_CLEAN_REMOVES)

spotless:
	$(RM) Results/*/*.tst
	$(RM) ParallelResults/*/*.ptst
	$(RM) *.e 
	$(RM) *.o
	$(ADDITIONAL_CLEAN_REMOVES)
	$(ADDITIONAL_SPOTLESS_REMOVES)


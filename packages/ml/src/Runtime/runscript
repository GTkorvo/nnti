#!/bin/csh -f

#limit coredumpsize 1k

#if ($?PBS_O_WORKDIR) then
#  cd $PBS_O_WORKDIR
#endif
#
#if (! $?SESSARGS) then
#  setenv SESSARGS "$*"
#endif


#setenv MEMORYGRP "<ProcMemoryGrp>:()"
#setenv MESSAGEGRP "<MPIMessageGrp>:()"
#setenv THREADGRP "<PthreadThreadGrp>:(num_threads=2)"

#set ml = /home/chtong/ML/ml.experiment/src/Runtime

#if ($?PBS_ENVIRONMENT) then
#  if ($PBS_ENVIRONMENT == PBS_BATCH) then
#    echo Running ml_example2d $SESSARGS
#  endif
#endif

set machfile = /home/chtong/ML/ml.experiment/src/Runtime/machfile

#if ($PBS_NODEFILE) then
#   /bin/cp $PBS_NODEFILE $machfile
#else
#   echo localhost > $machfile
#endif

/usr/local/mpich/bin/mpirun -np 4 -machinefile $machfile /home/chtong/ML/ml.experiment/src/Runtime/ml_example2d < /home/chtong/ML/ml.experiment/src/Runtime/inputfile

#if ($?OUTFILE) then
#  /usr/local/mpich/bin/mpirun -machinefile $machfile /home/chtong/ML.experiment/src/Runtime/ml_example2d 
#else
#  /usr/local/mpich/bin/mpirun -machinefile $machfile /usr/local/mpqc/1.2.3/bin/mpqc $SESSARGS
#endif


<?php 
  include 'common/header.php';
  include 'common/util.php';
  setBodyAttributes('onload="grabFocus();"'); 
  setFilename('index.html');
  setTitle('Matrix Port -- Step 2: Parameters');
  setDir('./');
  include 'common/header.html';

  $ProblemIDs = $_POST['ProblemIDs'];
  $ResultIDs = $_POST['ResultIDs'];
?>

<!-- begin content ######################################################### -->

  <p class="heading">Trilinos <a href="index.html">WebSolver</a> - You are at Step 2: Parameters</p>
  
  <? step_header("2"); ?>
  
  <!-- --------------------------------------------------------------------- -->
  
  <br/>
  <div class="problemIDs">
  <?php print_problem_and_result($ProblemIDs, $ResultIDs); ?> 
  </div>
  <p>

  <p>
  <? print_form(); ?>

  <!-- --------------------------------------------------------------------- -->
  
<!-- end content ########################################################### -->

<?php include 'common/footer.html'; ?>

<?
  function print_form() { ?>

  <form action="step3.html" enctype="multipart/form-data" method="post" name="inputForm">

    <!-- ---------------------------------------------------------- -->

    <div class="formSection">
    <p class="subheading">General Settings</p>

    <table class="formTable" cellspacing="0" cellpadding="0">
      <tr>
        <td>Solver: </td>
        <td><input type="text" name="az_solver" value="AZ_gmres" />
      </tr>
      <tr>
        <td>Maximum iterations: </td>
        <td><input type="text" name="iters" value="1550" />
      </tr>
      <tr>
        <td>Tolerance: </td>
        <td><input type="text" name="tol" value="1e-5" />
      </tr>
    </table><br />

    </div>
    <p>

    <!-- ---------------------------------------------------------- -->

    <p>
    <div class="formSection">
    <p class="subheading">Chebyshev Preconditioners: FIXME: DOES NOT WORK</p>

    <table class="formTable" cellspacing="0" cellpadding="0">
      <tr>
        <td>Analyze Chebyshev Preconditioners: </td><td>
        <input type="radio" name="perform_cheby" value="True"> Yes
        &nbsp; &nbsp;
        <input type="radio" name="perform_cheby" value="False" checked> No
      </tr>
      <tr>
    </table><br />

    <table class="formTable" cellspacing="0" cellpadding="0">
    <? fixed_parameter("chebyshev: degree", "i", "3"); ?>
    </table><br />
    </div>

    <!-- ---------------------------------------------------------- -->

    <p>
    <div class="formSection">
    <p class="subheading">Relaxation Preconditioners</p>

    <table class="formTable" cellspacing="0" cellpadding="0">
      <tr>
        <td>Analyze Jacobi Preconditioners: </td><td>
        <input type="radio" name="perform_jacobi" value="True"> Yes
        &nbsp; &nbsp;
        <input type="radio" name="perform_jacobi" value="False" checked> No
      </tr>
      <tr>
        <td>Analyze Gauss-Seidel Preconditioners: </td><td>
        <input type="radio" name="perform_gs" value="True"> Yes
        &nbsp; &nbsp;
        <input type="radio" name="perform_gs" value="False" checked> No
      </tr>
      <tr>
        <td>Analyze symmetric Gauss-Seidel Preconditioners: </td><td>
        <input type="radio" name="perform_sgs" value="True"> Yes
        &nbsp; &nbsp;
        <input type="radio" name="perform_sgs" value="False" checked> No
      </tr>
    </table><br />

    <table class="formTable" cellspacing="0" cellpadding="0">
    <? fixed_parameter("relaxation: damping", "d", "0.67"); ?>
    <? fixed_parameter("relaxation: sweeps", "i", "1"); ?>
    </table><br />
    </div>

    <!-- ---------------------------------------------------------- -->

    <p>
    <div class="formSection">
    <p class="subheading">Incomplete Factorization Preconditioners</p>

    <table class="formTable" cellspacing="0" cellpadding="0">
      <tr>
        <td>Analyze IC Preconditioners: </td><td>
        <input type="radio" name="perform_ic" value="True"> Yes
        &nbsp; &nbsp;
        <input type="radio" name="perform_ic" value="False" checked> No
      </tr>
      <tr>
        <td>Analyze ICT Preconditioners: FIXME: DOES NOT WORK</td><td>
        <input type="radio" name="perform_ict" value="True"> Yes
        &nbsp; &nbsp;
        <input type="radio" name="perform_ict" value="False" checked> No
      </tr>
      <tr>
        <td>Analyze ILU Preconditioners: </td><td>
        <input type="radio" name="perform_ilu" value="True"> Yes
        &nbsp; &nbsp;
        <input type="radio" name="perform_ilu" value="False" checked> No
      </tr>
      <tr>
        <td>Analyze ILUT Preconditioners: FIXME: DOES NOT WORK</td><td>
        <input type="radio" name="perform_ilut" value="True"> Yes
        &nbsp; &nbsp;
        <input type="radio" name="perform_ilut" value="False" checked> No
      </tr>
    </table><br />

    <table class="formTable" cellspacing="0" cellpadding="0">
    <? fixed_parameter("ic: level-of-fill", "i", "0"); ?>
    <? fixed_parameter("ict: level-of-fill", "d", "1.0"); ?>
    <? fixed_parameter("ilu: level-of-fill", "i", "0"); ?>
    <? fixed_parameter("ilut: level-of-fill", "d", "1.0"); ?>
    </table><br />
    </div>

    <!-- ---------------------------------------------------------- -->

    <p>
    <div class="formSection">
    <p class="subheading">Multilevel Preconditioners</p>

    <table class="formTable" cellspacing="0" cellpadding="0">
      <tr>
        <td>Analyze Multilevel Preconditioners: </td><td>
        <input type="radio" name="perform_ml" value="True"> Yes
        &nbsp; &nbsp;
        <input type="radio" name="perform_ml" value="False" checked> No
      </tr>
    </table><br />

    <p>
    <table class="formTable" cellspacing="0" cellpadding="0">
    <? fixed_parameter("max levels", "i", "10"); ?>
    <? fixed_parameter("coarse: max size", "i", "512"); ?>

    <tr><td>&nbsp;</tr></tr>

    <? fixed_parameter("aggregation: damping factor", "d", "1.333"); ?>
    <? fixed_parameter("aggregation: type", "s", "Uncoupled-MIS"); ?>
    <? fixed_parameter("aggregation: nodes per aggregate", "i", "512"); ?>

    <tr><td>&nbsp;</td></tr>

    <? fixed_parameter("smoother: type", "s", "symmetric Gauss-Seidel"); ?>
    <? fixed_parameter("smoother: damping factor", "d", "0.67"); ?>
    <? fixed_parameter("smoother: sweeps", "i", "1"); ?>
    <? fixed_parameter("smoother: pre or post", "s", "both"); ?>
    </table><br />

    </div>

    <!-- ---------------------------------------------------------- -->

    <p>
    <div class="formSection">
    <p class="subheading"><font color=blue>Performance Evaluation</font></p>

    <table class="formTable" cellspacing="0" cellpadding="0">
      <tr><td>  phi = </td>
        <? fixed_parameter2("evaluation: setup time", "d", "0.0"); ?>
        <td> x&nbsp; Setup CPU time (s)</td> <td> + </td>
      </tr>  
      <tr><td></td>
        <? fixed_parameter2("evaluation: solution time", "d", "0.0"); ?>
        <td> x&nbsp; Solution CPU time (s)</td> <td> + </td>
      </tr>  
      <tr><td></td>
        <? fixed_parameter2("evaluation: iterations", "d", "1.0"); ?>
        <td> x&nbsp; iterations</td> <td> + </td>
      </tr>  
      <tr><td></td>
        <? fixed_parameter2("evaluation: condnum", "d", "0.0"); ?>
        <td> x&nbsp; cond(P A)</td> <td>  </td>
      </tr>  
    </table><br />
    </div>

    <!-- php marker for stage in form process -->
    <input type="hidden" name="stage" value="process_iterative">
    <input type="hidden" name="ProblemIDs" value="<? global $ProblemIDs; echo $ProblemIDs; ?>">
    <input type="hidden" name="ResultIDs" value="<? global $ResultIDs; echo $ResultIDs; ?>">
    <input type="hidden" name="counter" value="<? global $counter; echo $counter; ?>">
    <input type="hidden" name="perform_analysis" value="False">
  

  <br>
  Continue to:
  <input type="submit" class=submitSecondary name="submit" value="Step 3: Compute">
  
  </form>
  
<? } ?>

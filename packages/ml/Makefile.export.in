ML_LIBS = -L$(ML_BUILD_DIRECTORY)/src -lml \
                    $(NOX_LIBS) \
                    $(IFPACK_LIBS) \
                    $(AMESOS_LIBS) \
                    $(AZTECOO_LIBS) \
                    $(ANASAZI_LIBS) \
                    $(TEUCHOS_LIBS) \
                    $(EPETRAEXT_LIBS) \
                    $(TRIUTILS_LIBS) \
                    $(EPETRA_LIBS) \
                    @LDFLAGS@ @LAPACK_LIBS@ @BLAS_LIBS@ @LIBS@ @FLIBS@ 

ML_INCLUDES = $(ML_BUILD_LIB_INCLUDES) \
                  $(AZTECOO_INCLUDES)  \
                  $(IFPACK_INCLUDES)  \
                  $(AMESOS_INCLUDES)  \
                  $(EPETRA_INCLUDES)  \
                  $(TRIUTILS_INCLUDES)  \
                  $(ANASAZI_INCLUDES)  \
                  $(TEUCHOS_INCLUDES)  \
                  $(EPETRAEXT_INCLUDES) \
                  $(NOX_INCLUDES) 

##########################################################################
# Set the absolute path to the ml build directory
##########################################################################

ML_SOURCE_DIRECTORY = @abs_srcdir@
ML_BUILD_DIRECTORY = @ML_BUILD_DIRECTORY@

ML_BUILD_LIB_INCLUDES = -I$(ML_SOURCE_DIRECTORY)/src/Include  \
			-I$(ML_SOURCE_DIRECTORY)/src/Coarsen  \
			-I$(ML_SOURCE_DIRECTORY)/src/Comm     \
			-I$(ML_SOURCE_DIRECTORY)/src/FEGrid   \
			-I$(ML_SOURCE_DIRECTORY)/src/Include  \
			-I$(ML_SOURCE_DIRECTORY)/src/Krylov   \
			-I$(ML_SOURCE_DIRECTORY)/src/Main     \
			-I$(ML_SOURCE_DIRECTORY)/src/Operator \
			-I$(ML_SOURCE_DIRECTORY)/src/Smoother \
			-I$(ML_SOURCE_DIRECTORY)/src/Utils    \
			-I$(ML_SOURCE_DIRECTORY)/src/MLAPI    \
			-I$(ML_SOURCE_DIRECTORY)/src/NonlinML \
			-I$(ML_SOURCE_DIRECTORY)/src/         \
			-I$(ML_BUILD_DIRECTORY)/src

##########################################################################
# Using the absolute location of ml's build directory as
# a reference point, get the paths to the other build directories.
##########################################################################

TEUCHOS_BUILD_DIRECTORY = $(ML_BUILD_DIRECTORY)/../teuchos

EPETRA_BUILD_DIRECTORY = $(ML_BUILD_DIRECTORY)/../epetra

EPETRAEXT_BUILD_DIRECTORY = $(ML_BUILD_DIRECTORY)/../epetraext

IFPACK_BUILD_DIRECTORY = $(ML_BUILD_DIRECTORY)/../ifpack

AZTECOO_BUILD_DIRECTORY = $(ML_BUILD_DIRECTORY)/../aztecoo

AMESOS_BUILD_DIRECTORY = $(ML_BUILD_DIRECTORY)/../amesos

ANASAZI_BUILD_DIRECTORY = $(ML_BUILD_DIRECTORY)/../anasazi

TRIUTILS_BUILD_DIRECTORY = $(ML_BUILD_DIRECTORY)/../triutils

NOX_BUILD_DIRECTORY = $(ML_BUILD_DIRECTORY)/../nox

##########################################################################
# Other Trilinos package libraries
##########################################################################

@ML_USING_AZTECOO_TRUE@AZTECOO_LIBS = -L$(AZTECOO_BUILD_DIRECTORY)/src -laztecoo

@ML_USING_EPETRA_TRUE@EPETRA_LIBS = -L$(EPETRA_BUILD_DIRECTORY)/src  -lepetra

@ML_USING_EPETRAEXT_TRUE@EPETRAEXT_LIBS = -L$(EPETRAEXT_BUILD_DIRECTORY)/src -lepetraext

@ML_USING_IFPACK_TRUE@IFPACK_LIBS = -L$(IFPACK_BUILD_DIRECTORY)/src -lifpack

@ML_USING_TEUCHOS_TRUE@TEUCHOS_LIBS = -L$(TEUCHOS_BUILD_DIRECTORY)/src -lteuchos

@ML_USING_AMESOS_TRUE@AMESOS_LIBS = -L$(AMESOS_BUILD_DIRECTORY)/src -lamesos

@ML_USING_TRIUTILS_TRUE@TRIUTILS_LIBS = -L$(TRIUTILS_BUILD_DIRECTORY)/src -ltriutils

@ML_USING_ANASAZI_TRUE@ANASAZI_LIBS = -L$(ANASAZI_BUILD_DIRECTORY)/src -lanasazi

@ML_USING_NOX_TRUE@NOX_LIBS = -L$(NOX_BUILD_DIRECTORY)/src-epetra \
                  -L$(NOX_BUILD_DIRECTORY)/src -lnoxepetra -lnox

##########################################################################
# Other Trilinos package include directories
##########################################################################

@ML_USING_AZTECOO_TRUE@AZTECOO_INCLUDES = -I$(ML_SOURCE_DIRECTORY)/../aztecoo/src -I$(AZTECOO_BUILD_DIRECTORY)/src
@ML_USING_AMESOS_TRUE@AMESOS_INCLUDES = -I$(ML_SOURCE_DIRECTORY)/../amesos/src -I$(AMESOS_BUILD_DIRECTORY)/src
@ML_USING_IFPACK_TRUE@IFPACK_INCLUDES = -I$(ML_SOURCE_DIRECTORY)/../ifpack/src -I$(IFPACK_BUILD_DIRECTORY)/src
@ML_USING_TEUCHOS_TRUE@TEUCHOS_INCLUDES = -I$(ML_SOURCE_DIRECTORY)/../teuchos/src -I$(TEUCHOS_BUILD_DIRECTORY)/src
@ML_USING_ANASAZI_TRUE@ANASAZI_INCLUDES = -I$(ML_SOURCE_DIRECTORY)/../anasazi/src -I$(ANASAZI_BUILD_DIRECTORY)/src
@ML_USING_TRIUTILS_TRUE@TRIUTILS_INCLUDES = -I$(ML_SOURCE_DIRECTORY)/../triutils/src -I$(TRIUTILS_BUILD_DIRECTORY)/src
@ML_USING_EPETRA_TRUE@EPETRA_INCLUDES = -I$(ML_SOURCE_DIRECTORY)/../epetra/src -I$(EPETRA_BUILD_DIRECTORY)/src
@ML_USING_EPETRAEXT_TRUE@EPETRAEXT_INCLUDES = -I$(ML_SOURCE_DIRECTORY)/../epetraext/src -I$(ML_SOURCE_DIRECTORY)/../epetraext/src/coloring -I$(ML_SOURCE_DIRECTORY)/../epetraext/src/transform  -I$(ML_SOURCE_DIRECTORY)/../epetraext/src/inout   -I$(EPETRAEXT_BUILD_DIRECTORY)/src
@ML_USING_NOX_TRUE@NOX_INCLUDES = -I$(ML_SOURCE_DIRECTORY)/../nox/src -I$(ML_SOURCE_DIRECTORY)/../nox/src-epetra -I$(NOX_BUILD_DIRECTORY)/src

##########################################################################
#
# Macro definitions to be exported from ml to non-Trilinos clients.
#
# It is assumed that the client's configuration sets the macro 
# TRILINOS_DIR to the Trilinos installation directory. 
#
# In order for these include and lib paths to be valid, 
# Trilinos needs to be installed with "make install" so that
# the libraries and headers are put in $(TRILINOS_DIR)/lib and 
# $(TRILINOS_DIR)/include, respectively. 
#
##########################################################################

ML_EXTRA_INCLUDES = $(TRIUTILS_INCLUDES)
ML_EXTRA_LIBS     = $(TRIUTILS_LIBS)

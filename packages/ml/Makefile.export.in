##########################################################################
#
# Modified from TSFExtended/Makefile.export.in
#
# Macro definitions to be exported from ML to clients.
# 
# To link with everything required by ml, simply add 
# $(ML_EXPORT_LIBS) to the linker command line in your Makefile.
#
# To add a new ML dependency called XX, add or modify as appropriate
# the following variables:
#
#       1) ML_EXPORT_LIBS
#
#       2) XX_BUILD_DIRECTORY
#
#       3) XX_LIBS.
#
# See anasazi as an example.
#
##########################################################################


ML_EXPORT_LIBS = -L$(ML_BUILD_DIRECTORY)/src -lml \
                  -L$(AZTECOO_BUILD_DIRECTORY)/src $(AZTECOO_LIBS) \
                  -L$(IFPACK_BUILD_DIRECTORY)/src  $(IFPACK_LIBS) \
                  -L$(AMESOS_BUILD_DIRECTORY)/src  $(AMESOS_LIBS) \
                  -L$(ANASAZI_BUILD_DIRECTORY)/src $(ANASAZI_LIBS) \
                  -L$(TEUCHOS_BUILD_DIRECTORY)/src  $(TEUCHOS_LIBS) \
                  -L$(TRIUTILS_BUILD_DIRECTORY)/src $(TRIUTILS_LIBS) \
                  -L$(EPETRA_BUILD_DIRECTORY)/src  $(EPETRA_LIBS)

ML_EXPORT_INCLUDES = $(ML_INCLUDES) \
                  $(AZTECOO_INCLUDES)  \
                  $(IFPACK_INCLUDES)  \
                  $(AMESOS_INCLUDES)  \
                  $(EPETRA_INCLUDES)  \
                  $(TRIUTILS_INCLUDES)  \
                  $(ANASAZI_INCLUDES)  \
                  $(TEUCHOS_INCLUDES) 

##########################################################################
# Set the absolute path to the ml build directory
##########################################################################

ML_BUILD_DIRECTORY = @ML_BUILD_DIRECTORY@

##########################################################################
# ML's include directories
##########################################################################

ML_INCLUDES = -I$(top_srcdir)/src/Include            \
              -I$(top_srcdir)/src/Coarsen            \
              -I$(top_srcdir)/src/Comm               \
              -I$(top_srcdir)/src/FEGrid             \
              -I$(top_srcdir)/src/Include            \
              -I$(top_srcdir)/src/Krylov             \
              -I$(top_srcdir)/src/Main               \
              -I$(top_srcdir)/src/Operator           \
              -I$(top_srcdir)/src/Smoother           \
              -I$(top_srcdir)/src/Utils

##########################################################################
# Using the absolute location of ml's build directory as
# a reference point, get the paths to the other build directories.
##########################################################################

TEUCHOS_BUILD_DIRECTORY = $(ML_BUILD_DIRECTORY)/../teuchos

EPETRA_BUILD_DIRECTORY = $(ML_BUILD_DIRECTORY)/../epetra

IFPACK_BUILD_DIRECTORY = $(ML_BUILD_DIRECTORY)/../ifpack

AZTECOO_BUILD_DIRECTORY = $(ML_BUILD_DIRECTORY)/../aztecoo

AMESOS_BUILD_DIRECTORY = $(ML_BUILD_DIRECTORY)/../amesos

ANASAZI_BUILD_DIRECTORY = $(ML_BUILD_DIRECTORY)/../anasazi

TRIUTILS_BUILD_DIRECTORY = $(ML_BUILD_DIRECTORY)/../triutils

##########################################################################
# Other Trilinos package libraries
##########################################################################

@ML_USING_AZTECOO_TRUE@AZTECOO_LIBS = -laztecoo

@ML_USING_EPETRA_TRUE@EPETRA_LIBS = -lepetra

@ML_USING_IFPACK_TRUE@IFPACK_LIBS = -lifpack

@ML_USING_TEUCHOS_TRUE@TEUCHOS_LIBS = -lteuchos

@ML_USING_AMESOS_TRUE@AMESOS_LIBS = -lamesos

@ML_USING_TRIUTILS_TRUE@TRIUTILS_LIBS = -ltriutils

@ML_USING_ANASAZI_TRUE@ANASAZI_LIBS = -lanasazi

##########################################################################
# Other Trilinos package include directories
##########################################################################

@ML_USING_AZTECOO_TRUE@AZTECOO_INCLUDES = -I$(top_srcdir)/../aztecoo/src -I$(AZTECOO_BUILD_DIRECTORY)/src
@ML_USING_AMESOS_TRUE@AMESOS_INCLUDES = -I$(top_srcdir)/../amesos/src -I$(AMESOS_BUILD_DIRECTORY)/src
@ML_USING_IFPACK_TRUE@IFPACK_INCLUDES = -I$(top_srcdir)/../ifpack/src -I$(IFPACK_BUILD_DIRECTORY)/src
@ML_USING_TEUCHOS_TRUE@TEUCHOS_INCLUDES = -I$(top_srcdir)/../teuchos/src -I$(TEUCHOS_BUILD_DIRECTORY)/src
@ML_USING_ANASAZI_TRUE@ANASAZI_INCLUDES = -I$(top_srcdir)/../anasazi/src -I$(ANASAZI_BUILD_DIRECTORY)/src
@ML_USING_TRIUTILS_TRUE@TRIUTILS_INCLUDES = -I$(top_srcdir)/../triutils/src -I$(TRIUTILS_BUILD_DIRECTORY)/src
@ML_USING_EPETRA_TRUE@EPETRA_INCLUDES = -I$(top_srcdir)/../epetra/src -I$(EPETRA_BUILD_DIRECTORY)/src
##########################################################################
#
# Macro definitions to be exported from ml to non-Trilinos clients.
#
# It is assumed that the client's configuration sets the macro 
# TRILINOS_DIR to the Trilinos installation directory. 
#
# In order for these include and lib paths to be valid, 
# Trilinos needs to be installed with "make install" so that
# the libraries and headers are put in $(TRILINOS_DIR)/lib and 
# $(TRILINOS_DIR)/include, respectively. 
#
##########################################################################

ML_TRILINOS_INCLUDES = -I$(TRILINOS_DIR)/include

ML_TRILINOS_LIBS = -L$(TRILINOS_DIR)/lib $(ML_EXPORT_LIBS)


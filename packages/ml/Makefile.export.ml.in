###########################################################################
# These are the include path and the libraries needed to compile the ML
# library, and to link the ML library with another package of an
# application.
###########################################################################

# Optional ML dependencies 
@ML_USING_EPETRA_TRUE@include @abs_top_builddir@/../epetra/Makefile.export.epetra 
@ML_USING_AMESOS_TRUE@include @abs_top_builddir@/../amesos/Makefile.export.amesos
@ML_USING_IFPACK_TRUE@include @abs_top_builddir@/../ifpack/Makefile.export.ifpack
@ML_USING_TEUCHOS_TRUE@include @abs_top_builddir@/../teuchos/Makefile.export.teuchos
@ML_USING_ANASAZI_TRUE@include @abs_top_builddir@/../anasazi/Makefile.export.anasazi
@ML_USING_AZTECOO_TRUE@include @abs_top_builddir@/../aztecoo/Makefile.export.aztecoo
@ML_USING_EPETRAEXT_TRUE@include @abs_top_builddir@/../epetraext/Makefile.export.epetraext

# These are the needed includes to build the library
ML_BUILD_LIB_INCLUDES = \
	    -I@abs_top_srcdir@/src \
	    -I@abs_top_builddir@/src \
            -I@abs_top_srcdir@/src/Comm \
	    -I@abs_top_srcdir@/src/Operator \
	    -I@abs_top_srcdir@/src/Smoother \
	    -I@abs_top_srcdir@/src/Coarsen \
	    -I@abs_top_srcdir@/src/Krylov \
	    -I@abs_top_srcdir@/src/Main \
	    -I@abs_top_srcdir@/src/FEGrid \
	    -I@abs_top_srcdir@/src/Utils \
	    -I@abs_top_srcdir@/src/MLAPI \
	    -I@abs_top_srcdir@/src/Include \
	    $(EPETRA_INCLUDES) \
	    $(AMESOS_INCLUDES) \
	    $(IFPACK_INCLUDES) \
	    $(TEUCHOS_INCLUDES) \
	    $(ANASAZI_INCLUDES) \
	    $(AZTECOO_INCLUDES) \
	    $(EPETRAEXT_INCLUDES)

# These are the needed includes to build the examples
ML_INCLUDES = \
	    -I@abs_top_srcdir@/src \
	    -I@abs_top_builddir@/src \
            -I@abs_top_srcdir@/src/Comm \
	    -I@abs_top_srcdir@/src/Operator \
	    -I@abs_top_srcdir@/src/Smoother \
	    -I@abs_top_srcdir@/src/Coarsen \
	    -I@abs_top_srcdir@/src/Krylov \
	    -I@abs_top_srcdir@/src/Main \
	    -I@abs_top_srcdir@/src/FEGrid \
	    -I@abs_top_srcdir@/src/Utils \
	    -I@abs_top_srcdir@/src/MLAPI \
	    -I@abs_top_srcdir@/src/Include \
	    $(EPETRA_INCLUDES) \
	    $(TEUCHOS_INCLUDES) \
	    $(AZTECOO_INCLUDES)

ML_LIBS = @LDFLAGS@ -L@abs_top_builddir@/src -lml $(EPETRA_LIBS) $(AMESOS_LIBS) $(IFPACK_LIBS) $(TEUCHOS_LIBS) $(ANASAZI_LIBS) $(AZTECOO_LIBS) $(EPETRAEXT_LIBS) @LAPACK_LIBS@ @BLAS_LIBS@ @LIBS@ @FLIBS@ 

###########################################################################
# These variables define the include path and libraries that can be used in
# ML's examples and tests, but that are not required to compile or link
# ML itself.
###########################################################################

@ML_USING_TRIUTILS_TRUE@include @abs_top_builddir@/../triutils/Makefile.export.triutils

ML_EXTRA_INCLUDES = $(TRIUTILS_INCLUDES)

ML_EXTRA_LIBS = $(TRIUTILS_LIBS)

#ML_LINK = $(CXX) $(AM_CFLAGS) $(CFLAGS) $(AM_LDFLAGS) $(LDFLAGS) -o $@
ML_LINK = $(CXX) $(AM_LDFLAGS) $(LDFLAGS) -o $@

# Required dependency on Teuchos and Epetra
include @abs_top_builddir@/../teuchos/Makefile.export.teuchos
include @abs_top_builddir@/../epetra/Makefile.export.epetra
# Optional dependancy on thyra
@ENABLE_AMESOS_THYRA_TRUE@include @abs_top_builddir@/../thyra/Makefile.export.thyra

@ENABLE_AMESOS_THYRA_TRUE@AMESOS_THYRA_INCLUDES = \
@ENABLE_AMESOS_THYRA_TRUE@	-I@abs_top_srcdir@/thyra/src \
@ENABLE_AMESOS_THYRA_TRUE@	-I@abs_top_builddir@/thyra/src \
@ENABLE_AMESOS_THYRA_TRUE@	$(THYRA_INCLUDES)

@ENABLE_AMESOS_THYRA_TRUE@AMESOS_THYRA_LIBS = -L@abs_top_builddir@/thyra/src -lamesosthyra $(THYRA_LIBS)

# These are the include path and the libraries needed to compile the Amesos
# library, and to link the Amesos library with another package of an
# application.
_AMESOS_INCLUDES = \
  $(TEUCHOS_INCLUDES) \
  $(EPETRA_INCLUDES) \
  $(AMESOS_THYRA_INCLUDES) \
  -I@abs_top_srcdir@/src \
  -I@abs_top_builddir@/src


_AMESOS_LIBS = @LDFLAGS@ -L@abs_top_builddir@/src $(AMESOS_THYRA_LIBS) -lamesos $(EPETRA_LIBS) $(TEUCHOS_LIBS) @LAPACK_LIBS@ @BLAS_LIBS@ @LIBS@ @FLIBS@ 

@USING_GNUMAKE_TRUE@AMESOS_INCLUDES  = $(shell $(PERL_EXE) $(top_srcdir)/config/strip_dup_incl_paths.pl $(_AMESOS_INCLUDES))
@USING_GNUMAKE_TRUE@AMESOS_LIBS      = $(shell $(PERL_EXE) $(top_srcdir)/config/strip_dup_libs.pl $(_AMESOS_LIBS))
@USING_GNUMAKE_FALSE@AMESOS_INCLUDES = $(_AMESOS_INCLUDES)
@USING_GNUMAKE_FALSE@AMESOS_LIBS     = $(_AMESOS_LIBS)

@HAVE_AMESOS_TRIUTILS_TRUE@include @abs_top_builddir@/../triutils/Makefile.export.triutils

@HAVE_AMESOS_EPETRAEXT_TRUE@include @abs_top_builddir@/../epetraext/Makefile.export.epetraext

# These variables define the include path and libraries that can be used in
# the Amesos' examples and tests, but that are not required to compile or link
# Amesos itself.
_AMESOS_EXTRA_INCLUDES = $(EPETRAEXT_INCLUDES) $(TRIUTILS_INCLUDES)
_AMESOS_EXTRA_LIBS = $(EPETRAEXT_LIBS) $(TRIUTILS_LIBS)

@USING_GNUMAKE_TRUE@AMESOS_EXTRA_INCLUDES  = $(shell $(PERL_EXE) $(top_srcdir)/config/strip_dup_incl_paths.pl $(_AMESOS_EXTRA_INCLUDES))
@USING_GNUMAKE_TRUE@AMESOS_EXTRA_LIBS      = $(shell $(PERL_EXE) $(top_srcdir)/config/strip_dup_libs.pl $(_AMESOS_EXTRA_LIBS))
@USING_GNUMAKE_FALSE@AMESOS_EXTRA_INCLUDES = $(_AMESOS_EXTRA_INCLUDES)
@USING_GNUMAKE_FALSE@AMESOS_EXTRA_LIBS     = $(_AMESOS_EXTRA_LIBS)

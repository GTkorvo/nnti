include $(TRILINOS_HOME)/build/TRILINOS_TARGET_DEFS
TRILINOS_TARGET = $(TRILINOS_ARCH).$(TRILINOS_COMM)$(TRILINOS_ID)
include $(TRILINOS_HOME)/build/makefile.$(TRILINOS_TARGET)

DEFINES = -D$(TRILINOS_ARCH) $(EPETRA_ARCH_DEFINES) -D$(EPETRA_COMM) \
	-DIFPACK

INCLUDES = -I../utils -I../src $(ARCH_INCLUDES) $(IFPACK_INCLUDES) \
	$(EPETRA_INCLUDES) $(TRIUTILS_INCLUDES)

CFLAGS=$(ARCH_CFLAGS) $(DEFINES) $(INCLUDES)
FFLAGS=$(ARCH_FFLAGS) $(DEFINES) $(INCLUDES)
CXXFLAGS=$(ARCH_CXXFLAGS) $(DEFINES) $(INCLUDES)
CCFLAGS=$(CXXFLAGS)
LDFLAGS=$(ARCH_LDFLAGS)

LIB_PATHS= ../utils/libanasaziutils.$(LIB_EXT) $(LIBIFPACK) $(LIBEPETRA) \
$(LIBTRIUTILS) $(LIBLAPACK) $(LIBY12M) $(LIBBLAS)

BlockArnoldiPetraEx: BlockArnoldiPetraEx.$(OBJ_EXT)
	$(CXX) -o $@ $^ -I. $(INCLUDES) $(LIB_PATHS) $(ARCH_LIBS)

BlockArnoldiPetraEx.$(OBJ_EXT) : BlockArnoldiPetraEx.cpp 

clean:
	rm -f *.$(OBJ_EXT) *.stackdump core

#
# FRAMEWORK group
#

(FRAMEWORK, INSTALL, EpetraExtTests) {
    DIRS = MatrixMatrix,
           Permutation,
           Transpose,
           inout;
    ARGS = -v;
    COMM = SERIAL, MPI;
}

# Removed MapColoring & MatrixMatrix from MPI for now because they always seem to hang.

(FRAMEWORK, INSTALL, EpetraExtTests) {
    DIRS = MatrixMatrix,
           MapColoring;
    ARGS = -v;
    COMM = SERIAL;
}

(FRAMEWORK, INSTALL, EpetraExtPyExamples) {
        DIRS = ../python/example;
	ARGS = --testharness;
	EXIT-STATUS = STRING-COMPARISON;
        COMM = SERIAL, MPI(1-4);
}

(FRAMEWORK, INSTALL, EpetraExtPyTests) {
        DIRS = ../python/test;
	ARGS = --testharness;
	EXIT-STATUS = STRING-COMPARISON;
        COMM = SERIAL, MPI(1-4);
}

(FRAMEWORK, INSTALL, EpetraExtThyraTests) {
  TESTS = ../thyra/example/model_evaluator/ForwardSolveEpetraModelEval2DSim.exe;
  ARGS = --max-iters=6;
  COMM = SERIAL;
}

(FRAMEWORK, INSTALL, EpetraExtThyraTests) {
  TESTS = ../thyra/example/model_evaluator/ForwardSolveEpetraModelEval2DSim.exe;
  ARGS = --external-lowsf --max-iters=6;
  COMM = SERIAL;
}

(FRAMEWORK, INSTALL, EpetraExtThyraTests) {
  TESTS = ../thyra/example/model_evaluator/ForwardSolveEpetraModelEval2DSim.exe;
  ARGS = --tol=1e-12 --max-iters=7;
  COMM = SERIAL;
}

(FRAMEWORK, INSTALL, EpetraExtThyraTests) {
  TESTS = ../thyra/example/model_evaluator/ForwardSolveEpetraModelEval2DSim.exe;
  ARGS = --x00=-100 --tol=1e-12 --max-iters=12;
  COMM = SERIAL;
}

# In this example the Jacobian is singular at the solution
(FRAMEWORK, INSTALL, EpetraExtThyraTests) {
  TESTS = ../thyra/example/model_evaluator/ForwardSolveEpetraModelEval2DSim.exe;
  ARGS = --d=1.0 --p0=0.75 --p1=0.75 --tol=1e-8 --max-iters=21;
  COMM = SERIAL;
}

(FRAMEWORK, INSTALL, EpetraExtThyraTests) {
  TESTS = ../thyra/example/model_evaluator/ForwardSolveEpetraModelEval2DSim.exe;
  ARGS = --use-4D-opt --max-iters=6;
  COMM = SERIAL;
}

(FRAMEWORK, INSTALL, EpetraExtThyraTests) {
  TESTS = ../thyra/example/model_evaluator/ForwardSolveEpetraModelEval2DSim.exe;
  ARGS = --use-4D-opt --tol=1e-12 --max-iters=7;
  COMM = SERIAL;
}

(FRAMEWORK, INSTALL, EpetraExtThyraTests) {
  TESTS = ../thyra/example/model_evaluator/ForwardSolveEpetraModelEval2DSim.exe;
  ARGS = --use-4D-opt --x00=-100 --tol=1e-12 --max-iters=12;
  COMM = SERIAL;
}

(FRAMEWORK, INSTALL, EpetraExtThyraTests) {
  TESTS = ../thyra/example/model_evaluator/ForwardSolveEpetraModelEval2DSim.exe;
  ARGS = --external-lowsf --use-4D-opt --x00=-100 --tol=1e-12 --max-iters=12;
  COMM = SERIAL;
}

# In this example the Jacobian is singular at the solution
(FRAMEWORK, INSTALL, EpetraExtThyraTests) {
  TESTS = ../thyra/example/model_evaluator/ForwardSolveEpetraModelEval2DSim.exe;
  ARGS = --use-4D-opt --d=1.0 --p0=0.75 --p1=0.75 --tol=1e-8 --max-iters=21;
  COMM = SERIAL;
}
